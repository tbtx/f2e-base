<!doctype html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<title>request test</title>
	<script src="../../jquery/jquery-1.8.3.min.js"></script>
	<script src="../../tbtx.js"></script>
</head>

<body>
<span class="J_WangWang" data-nick="乌鸦_tbtx"  data-display="inline" data-encode="true"></span>


<script>
// tbtx.loadCss("http://a.tbcdn.cn/apps/tbtx/miiee/css/base.css", function() {
//	 alert('css loaded');
// });

tbtx.loadScript(["miiee/js/m.js", "miiee/js/base.js"], function() {
	 alert('script loaded');
}).done(function() {
	alert(1213);
});

// setTimeout(function() {
// 	tbtx.loadScript("http://a.tbcdn.cn/apps/tbtx/miiee/js/m.js", function() {
// 		alert('hehe loaded');
// 	});
// }, 2000);
//
var ret = tbtx.loadScript(["https://raw.github.com/seajs/seajs/master/dist/sea-debug.js", "http://a.tbcdn.cn/apps/tbtx/miiee/js/order/TweenMax.min.js", "http://a.tbcdn.cn/apps/tbtx/miiee/js/ZeroClipboard.min.js"], function() {
	// console.log(TweenMax);
	// console.log(ZeroClipboard);
	// console.log(seajs);
});

// ret.done(function() {
// 	console.log('done');
// });

//
var getData = function() {

	console.log('getData');
	var deferred = jQuery.Deferred();

	setTimeout(function() {
		deferred.resolve("src");
	}, 300);

	return deferred.promise();
}

var getImg = function(src) {
	console.log(src);
	var deferred = jQuery.Deferred();

	setTimeout(function() {
		deferred.resolve("img");
	}, 2300);
	return deferred.promise();
}

var showImg = function(img) {
	console.log(img);
}

var r = getData()
.then(getImg, function() {
	console.log("get data fail");
})
.then(showImg);

tbtx.initWangWang();
</script>

</body>

</html>
