!function(e,t,n,r){function i(e){var t=typeof e;return null===e||"object"!==t&&"function"!==t}function o(e){return e.match(Yt)[0]}function a(e){for(e=e.replace(Jt,"/"),e=e.replace(en,"$1/");e.match(Zt);)e=e.replace(Zt,"/");return e}function u(e){var t=e.length-1,n=e.charAt(t);return"#"===n?e.substring(0,t):".js"===e.substring(t-2)||e.indexOf("?")>0||".css"===e.substring(t-3)||"/"===n?e:e+".js"}function s(e){var t=Kt.alias;return t&&K(t[e])?t[e]:e}function c(e){var t,n=Kt.paths;return n&&(t=e.match(tn))&&K(n[t[1]])&&(e=n[t[1]]+t[2]),e}function f(e){var t=Kt.vars;return t&&e.indexOf("{")>-1&&(e=e.replace(nn,function(e,n){return K(t[n])?t[n]:e})),e}function l(e){var t=Kt.map,n=e;if(t)for(var r=0,i=t.length;i>r;r++){var o=t[r];if(n=X(o)?o(e)||e:e.replace(o[0],o[1]),n!==e)break}return n}function p(e,t){var n,r=e.charAt(0);if(rn.test(e))n=e;else if("."===r)n=(t?o(t):Kt.cwd)+e;else if("/"===r){var i=Kt.cwd.match(on);n=i?i[0]+e.substring(1):e}else n=Kt.base+e;return 0===n.indexOf("//")&&(n=S.protocol+n),a(n)}function d(e,t){if(!e)return"";e=s(e),e=c(e),e=f(e),e=u(e);var n=p(e,t);return n=l(n)}function g(e){return e.hasAttribute?e.src:e.getAttribute("src",4)}function h(e,n,r){n=n||O;var i=ln.test(e),o=t.createElement(i?"link":"script");if(r){var a=X(r)?r(e):r;a&&(o.charset=a)}v(o,n,i),i?(o.rel="stylesheet",o.href=e):(o.async=!0,o.src=e),zt=o,fn?T.insertBefore(o,fn):T.appendChild(o),zt=null}function v(e,t,n){var r="onload"in e;if(n&&(pn||!r))return setTimeout(function(){m(e,t)},1),void 0;var i=function(){e.onload=e.onerror=e.onreadystatechange=null,n||U("debug")||T.removeChild(e),e=null,t()};r?e.onload=e.onerror=i:e.onreadystatechange=function(){/loaded|complete/.test(e.readyState)&&i()}}function m(e,t){var n,r=e.sheet;if(pn)r&&(n=!0);else if(r)try{r.cssRules&&(n=!0)}catch(i){"NS_ERROR_DOM_SECURITY_ERR"===i.name&&(n=!0)}setTimeout(function(){n?t():m(e,t)},20)}function y(){if(t.currentScript)return t.currentScript;if(zt)return zt;if(Bt&&"interactive"===Bt.readyState)return Bt;for(var e,n=T.getElementsByTagName("script"),r=n.length-1;r>=0;r--)if(e=n[r],"interactive"===e.readyState)return Bt=e}function b(e,t){this.uri=e,this.dependencies=t||[],this.exports=null,this.status=0,this._waitings={},this._remain=0}function E(e){return In.test(e)||Un.test(e)||Y(e)}function w(e){var t,n;return Y(e)?e:In.test(e)?new Date(+e):(t=Un.exec(e),n=kn.exec(e),t&&n?new Date(n[0].replace(/-/g,"/")+" "+t[7]):new Date)}function x(e,t){return E(e)&&(t=[e,e=t][0]),e=e||"Y-m-d h:i:s",t=A(t),e.replace(Nn,function(e){return t[e]})}function A(e){e=w(e);var t={Y:e.getFullYear(),M:e.getMonth()+1,D:e.getDate(),H:e.getHours(),I:e.getMinutes(),S:e.getSeconds()},n={};return z(t,function(e,t){n[t]=e+"",n[t.toLowerCase()]=D(e).slice(-2)}),n}function D(e){return e+="",1===e.length?"0"+e:e}var S=e.location,j=navigator.userAgent,_=t.documentElement,T=t.head||t.getElementsByTagName("head")[0],C=e.console&&console.log,O=function(){},q=function(e){throw Q(e)?e:new Error(e)},N={},I={debug:-1!==S.search.indexOf("debug")?!0:!1,fns:N},U=function(e,t){var i,o=n,a=o.Config,u=a.fns,s=o;return K(e)?(i=u[e],t===r?s=i?i.call(o):a[e]:i?s=i.call(o,t):a[e]=t):z(e,function(e,t){i=u[t],i?i.call(o,e):a[t]=e}),s};n=e[n]={version:"2.5",log:C?function(e,t){return n.config("debug")&&(t&&(e=t+": "+e),console.log(e)),n}:O,error:q,global:e,noop:O,Config:I,config:U};var k=Array.prototype,$=(String.prototype,Function.prototype,Object.prototype),R={},M=R.toString,F=R.hasOwnProperty,G=k.slice,L=function(e,t){return F.call(e,t)},P=/[^, ]+/g,H=/<[^>]+>/gim,W=/\\?\{\{\s*([^{}\s]+)\s*\}\}/gm,z=function(e,t,n){var r=0,i=e.length;if(n&&(t=t.bind(n)),i===+i)for(;i>r&&t(e[r],r,e)!==!1;r++);else for(r in e)if(L(e,r)&&t(e[r],r,e)===!1)break};"Boolean Number String Function Array Date RegExp Object Error".replace(P,function(e,t){R["[object "+e+"]"]=t=e.toLowerCase(),n["is"+e]=function(e){return nt(e)===t}});var B=Array.isArray=n.isArray=Array.isArray||n.isArray,X=n.isFunction,V=n.isObject,K=n.isString,Q=n.isError,Y=n.isDate,J=function(e){return K(e)&&""!==e},Z=function(e,t){var n={};return t=t||function(e){return e},function(){var r=arguments,i=t.apply(this,r),o=n[i];return L(n,i)&&null!=o?n[i]:n[i]=e.apply(this,r)}},et=function(e,t){return t&&(e=e.bind(t)),Z(e,function(){return 1})},tt=function(e,t,n){return K(e)||B(t)||it(t)?e.replace(W,function(e,r){return"\\"===e.charAt(0)?e.slice(1):null==t[r]?n?e:"":t[r]}):e},nt=function(e){if(null==e)return e+"";var t=typeof e;return"object"===t||"function"===t?R[M.call(e)]||"object":t},rt=function(e){return null!=e&&e==e.window},it=function(e){return V(e)&&Object.getPrototypeOf(e)===$},ot=function(e){if(null==e)return[];if(B(e))return e;var t=[],n=0,r=e.length,i=nt(r),o=nt(e);if("number"!==i||"string"==typeof e.nodeName||rt(e)||"string"===o||"function"===o&&!("item"in e&&"number"===i))return[e];for(;r>n;n++)t[n]=e[n];return t},at=function(){var e,t,i,o,a,u,s=arguments[0]||{},c=1,f=arguments.length,l=!1;for("boolean"==typeof s&&(l=s,s=arguments[c]||{},c++),"object"==typeof s||X(s)||(s={}),c===f&&(s=n,c--);f>c;c++)if(null!=(a=arguments[c]))for(o in a)e=s[o],i=a[o],s!==i&&(l&&i&&(it(i)||(t=B(i)))?(t?(t=!1,u=e&&B(e)?e:[]):u=e&&it(e)?e:{},s[o]=at(l,u,i)):i!==r&&(s[o]=i));return s},ut=function(e,t){var n,r,i=e===t;if(i||null==e||null==t)return i;if(n=nt(e),r=nt(t),n!==r)return!1;switch(n){case"array":case"object":return st(e,t);case"string":return e==String(t);case"number":return i;case"date":case"boolean":return+e==+t}return i},st=function(e,t){var n;for(n in t)if(!L(e,n)&&L(t,n))return!1;for(n in e)if(!L(t,n)&&L(e,n))return!1;for(n in t)if(!ut(e[n],t[n]))return!1;return B(e)&&B(t)&&e.length!==t.length?!1:!0},ct=function(e){e=e||0;var t=0;return function(){return e+t++}},ft=function(e){return e.charAt(0).toUpperCase()+e.substring(1)},lt=function(e){return e.replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/\-/g,"_").toLowerCase()},pt=function(e){return lt(e).replace(/_/g,"-")},dt={"&amp;":"&","&gt;":">","&lt;":"<","&#x60;":"`","&#x2F;":"/","&quot;":'"',"&#x27;":"'"},gt={},ht=et(function(){var e="";return z(dt,function(t){e+=t+"|"}),e=e.slice(0,-1),new RegExp(e,"g")}),vt=et(function(){var e="";return z(gt,function(t){e+=t+"|"}),e+="&#(\\d{1,5});",new RegExp(e,"g")}),mt=function(e){return(e+"").replace(ht(),function(e){return gt[e]})},yt=function(e){return(e+"").replace(vt(),function(e){return dt[e]})};z(dt,function(e,t){gt[e]=t}),at({each:z,mix:at,extend:at,isWindow:rt,isPlainObject:it,isEqual:ut,type:nt,makeArray:ot,memoize:Z,singleton:et,cidGenerator:ct,uniqueCid:ct(),isNotEmptyString:J,ucfirst:ft,dasherize:pt,random:function(e,t){var n,r;return B(e)&&(n=e,e=0,t=n.length-1),null==t&&(t=e,e=0),r=e+Math.floor(Math.random()*(t-e+1)),n?n[r]:r},later:function(e,t,r,i,o){t=t||0;var a,u,s=e,c=ot(o);return K(e)&&(s=i[e]),s||n.error("later: method undefined"),a=function(){s.apply(i,c)},u=r?setInterval(a,t):setTimeout(a,t),{id:u,interval:r,cancel:function(){this.interval?clearInterval(u):clearTimeout(u)}}},throttle:function(e,t,n){if(n=n||this,t=t||150,-1===t)return e.bind(n);var r=Date.now();return function(){var i=Date.now();i-r>t&&(r=i,e.apply(n,arguments))}},debounce:function(e,t,r){if(r=r||this,t=t||150,-1===t)return e.bind(r);var i=null,o=function(){o.stop(),i=n.later(e,t,0,r,arguments)};return o.stop=function(){i&&(i.cancel(),i=0)},o},substitute:tt,truncate:function(e,t,n){return e+="",n=n||"...",e.length>t?e.slice(0,t-n.length)+n:e},stripTags:function(e){return(e+"").replace(H,"")},escapeHtml:mt,unEscapeHtml:yt});var bt=encodeURIComponent,Et=function(e){return decodeURIComponent(e.replace(/\+/g," "))},wt=function(e,t,n){t=t||"&",n=n||"=";var o=[];return z(e,function(e,a){a=bt(a),i(e)&&(o.push(a),e!==r&&o.push(n,bt(e)),o.push(t))}),o.pop(),o.join("")},xt=function(e,t,n){e=(e+"").trim(),t=t||"&",n=n||"=";var i,o,a,u={},s=e.split(t),c=0,f=s.length;if(!e)return u;for(;f>c;++c){if(i=s[c].indexOf(n),-1==i)o=Et(s[c]),a=r;else{o=Et(s[c].substring(0,i)),a=s[c].substring(i+1);try{a=Et(a)}catch(l){q(l)}}u[o]=a}return u},At=function(e){e=e||S.href;var n,r,i,o=t.createElement("a");return o.href=e,n=o.protocol,n=n.slice(0,n.length-1),r=o.pathname,"/"!=r.charAt(0)&&(r="/"+r),i=o.port,80==i&&(i=""),{scheme:n,domain:o.hostname,port:i,path:r,query:o.search.slice(1),fragment:o.hash.slice(1)}},Dt=function(e){this._query=e,this._map=xt(e)},St=function(e){var t=this,n=At(e);return z(n,function(e,n){if("query"===n)t.query=new Dt(e);else{try{e=Et(e)}catch(r){q(r)}t[n]=e}}),t},jt=/^(http|file|\/|\.)/,_t=function(e){return e+="",jt.test(e)};Dt.prototype={get:function(e){var t=this._map;return e?t[e]:t},set:function(e,t){var n=this,r=n._map;return K(e)?r[e]=t:(e instanceof Dt&&(e=e.get()),z(e,function(e,t){r[t]=e})),n},remove:function(e){var t=this;return e?(e=ot(e),z(e,function(e){delete t._map[e]})):t._map={},t},toString:function(){return wt(this._map)}},Dt.prototype.add=Dt.prototype.set,St.prototype={getFragment:function(){return this.fragment},toString:function(){{var e=[],t=this,n=t.scheme,r=t.domain,i=t.path,o=t.port,a=t.fragment,u=t.query.toString();t.credentials}return n&&(e.push(n),e.push(":")),r&&(e.push("//"),e.push(bt(r)),o&&(e.push(":"),e.push(o))),i&&e.push(i),u&&(e.push("?"),e.push(u)),a&&(e.push("#"),e.push(a)),e.join("")}},"add get remove set".replace(P,function(e){n[e+"QueryParam"]=function(){var t,n=ot(arguments),r=n.length;_t(n[0])?t=n.shift():_t(n[r-1])&&(t=n.pop());var i=new St(t),o=i.query,a=o[e].apply(o,n);return a===o?i.toString():a||""}}),at({Query:Dt,Uri:St,urlEncode:bt,urlDecode:Et,param:wt,unparam:xt,isUri:_t,parseUri:At,getFragment:function(e){return new St(e).getFragment()}});var Tt=n.events={};n.on=function(e,t){var r=Tt[e]||(Tt[e]=[]);return r.push(t),n},n.one=function(e,t){var r=function(){n.off(e,r),t.apply(n,arguments)};return n.on(e,r)},n.off=function(e,t){if(!e&&!t)return Tt=n.events={},n;var r=Tt[e];if(r)if(t)for(var i=r.length-1;i>=0;i--)r[i]===t&&r.splice(i,1);else delete Tt[e];return n};var Ct=n.trigger=function(e){var t=Tt[e],r=G.call(arguments,1);if(t){t=t.slice();for(var i=0,o=t.length;o>i;i++)t[i].apply(n,r)}return n},Ot=function(e){return t.createElement(e)},qt=Ot("tbtx"),Nt=qt.style,It=" ",Ut="Webkit Moz O ms",kt=Ut.split(It),$t=function(e){return Mt(e,"pfx")},Rt=function(e,t){var n,i;for(i in e)if(n=e[i],Nt[n]!==r)return"pfx"==t?n:!0;return!1},Mt=function(e,t){var n=ft(e),r=(e+It+kt.join(n+It)+n).split(It);return Rt(r,t)},Ft="ontouchstart"in _,Gt=!!j.match(/AppleWebKit.*Mobile.*/)||Ft,Lt=!!j.match(/iPad/i),Pt=Gt&&!Lt,Ht=Mt("transform"),Wt={transition:Mt("transition"),transform:Ht,touch:Ft,mobile:Gt,pad:Lt,phone:Pt,placeholder:"placeholder"in Ot("input"),canvas:function(){var e=Ot("canvas");return!(!e.getContext||!e.getContext("2d"))}(),testTranslate3d:function(){if(!Ht)return!1;var e,n=Ot("p"),i=$t("transform");return t.body.insertBefore(n,null),n.style[i]="translate3d(1px,1px,1px)",e=getComputedStyle(n).getPropertyValue(pt(i)),t.body.removeChild(n),e!==r&&e.length>0&&"none"!==e}};at({support:Wt,testPropsAll:Mt,prefixed:$t});var zt,Bt,Xt,Vt=n.Loader={},Kt=Vt.data={},Qt=ct(),Yt=/[^?#]*\//,Jt=/\/\.\//g,Zt=/\/[^/]+\/\.\.\//,en=/([^:/])\/+\//g,tn=/^([^/:]+)(\/.+)$/,nn=/{([^{]+)}/g,rn=/^\/\/.|:\//,on=/^.*?\/\/.*?\//,an=o(S.href),un=t.scripts,sn=un[un.length-1],cn=o(g(sn)||an),fn=T.getElementsByTagName("base")[0],ln=/\.css(?:\?|$)/i,pn=+navigator.userAgent.replace(/.*(?:AppleWebKit|AndroidWebKit)\/(\d+).*/,"$1")<536,dn=Vt.cache={},gn={},hn={},vn={},mn=b.STATUS={FETCHING:1,SAVED:2,LOADING:3,LOADED:4,EXECUTING:5,EXECUTED:6};b.prototype={resolve:function(){var e=this,t=e.uri,n=e.dependencies;return n.map(function(e){return b.resolve(e,t)})},load:function(){var e=this;if(!(e.status>=mn.LOADING)){e.status=mn.LOADING;var t=e.resolve();Ct("load",t);var n,r,i=e._remain=t.length,o=e.uri;for(r=0;i>r;r++)n=b.get(t[r]),n.status<mn.EXECUTED?n._waitings[o]=(n._waitings[o]||0)+1:e._remain--;if(0===e._remain)return e.onload(),void 0;var a={};for(r=0;i>r;r++)n=dn[t[r]],n.status<mn.FETCHING?n.fetch(a):n.status===mn.SAVED&&n.load();for(var u in a)a.hasOwnProperty(u)&&a[u]()}},onload:function(){var e=this;e.status=mn.LOADED,e.callback&&e.callback(),e.exec()},exec:function(){var e=this;if(e.status>=mn.EXECUTING)return e.exports;e.status=mn.EXECUTING;for(var t=e.uri,n=e.resolve(),i=[],o=0,a=n.length;a>o;o++)i[o]=b.get(n[o]).exports;var u=e.factory,s=X(u)?u.apply(null,i):u;s===r&&(s=e.exports),delete e.factory,e.exports=s,e.status=mn.EXECUTED;var c,f=e._waitings;for(t in f)f.hasOwnProperty(t)&&(c=dn[t],c._remain-=f[t],0===c._remain&&c.onload());return delete e._waitings,delete e._remain,s},fetch:function(e){function t(){h(a,n,Kt.charset)}function n(){delete gn[a],hn[a]=!0,Xt&&(b.save(i,Xt),Xt=null);var e,t=vn[a];for(delete vn[a];e=t.shift();)e.load()}var r=this,i=r.uri;r.status=mn.FETCHING;var o={uri:i};Ct("fetch",o);var a=o.requestUri||i;return!a||hn[a]?(r.load(),void 0):gn[a]?(vn[a].push(r),void 0):(gn[a]=!0,vn[a]=[r],e?e[a]=t:t(),void 0)}},b.save=function(e,t){var n=b.get(e);n.status<mn.SAVED&&(n.id=t.id||e,n.dependencies=t.deps||[],n.factory=t.factory,n.status=mn.SAVED)},b.get=function(e,t){return dn[e]||(dn[e]=new b(e,t))},b.require=function(t,n,r){var i=b.get(r,ot(t));n&&(i.callback=function(){var t=i.resolve(),r=t.map(function(e){return dn[e].exports});n.apply(e,r),delete i.callback}),i.load()},b.resolve=function(e,t){return d(e,t)},b.define=function(e,t,n){var i=arguments.length;1===i?(n=e,e=r):2===i&&(n=t,B(e)?(t=e,e=r):t=r),B(t)||(t=[]);var o={id:e,uri:b.resolve(e),deps:t,factory:n};if(!o.uri){var a=y();a&&(o.uri=a.src)}o.uri?b.save(o.uri,o):Xt=o},b.define.amd={},Kt.fetchedList=hn,Kt.base=cn,Kt.dir=cn,Kt.cwd=an,Kt.charset="utf-8",Vt.config=function(e){for(var t in e){var n=e[t],r=Kt[t];if(r&&V(r))for(var i in n)r[i]=n[i];else B(r)?n=r.concat(n):"base"===t&&("/"!==n.slice(-1)&&(n+="/"),n=p(n)),Kt[t]=n}},Vt.resolve=d;var yn=e.define=b.define,bn=e.require=function(e,t){return b.require(e,t,Kt.cwd+"_require_"+Qt()),n};at({Module:b,define:yn,require:bn,realpath:a,loadScript:h,loadCss:h});var En=n.staticUrl=a(cn+"../../../"),wn={},xn={},An={component:{switchable:"1.0.3",validator:"0.9.7",popup:"1.0.0"},plugin:{lazyload:"1.8.4",easing:"1.3"},gallery:{jquery:Wt.phone?"2.1.1":"1.11.1",handlebars:"1.3.0",json:"2"},arale:{base:"1.1.1",widget:"1.1.1",position:"1.0.1"},dist:{msg:"1.0.0"}},Dn="{{ dir }}/{{ name }}/{{ version }}/{{ name }}";if(z(An,function(e,t){wn[t]=a(cn+"../../")+t,z(e,function(e,n){xn[n]=tt(Dn,{dir:t,name:n,version:e})})}),xn.$=xn.jquery,Vt.config({base:En,alias:xn,paths:wn}),!U("debug")){var Sn=Math.floor(Date.now()/36e5);Vt.config({map:[function(e){return-1===e.indexOf("t=")?e.replace(/^(.*\.(?:css|js))(.*)$/i,"$1?t="+Sn):void 0}]})}"alias map paths".replace(P,function(e){N[e]=function(t){if(!t)return Kt[e];var n={};n[e]=t,Vt.config(n)}});var jn,_n=e.jQuery,Tn=e.JSON;Tn&&yn("json",Tn),_n&&(jn=function(){return _n},yn("jquery",jn),yn("$",jn)),yn("tbtx",n);var Cn={broadcast:{module:"msg"},pin:{module:"position"},center:{module:"position"}};z(Cn,function(e,t){var r=e.module;n[t]=function(){var e=arguments;bn(r,function(r){var i=r[t];X(i)&&(i.apply(n,e),n[t]=i)})}});var On=864e5,qn=n.cookie={get:function(e){var n,r;return J(e)&&(r=String(t.cookie).match(new RegExp("(?:^| )"+e+"(?:(?:=([^;]*))|;|$)")))&&(n=r[1]?Et(r[1]):""),n},set:function(e,n,r,i,o,a){var u=String(bt(n)),s=i;return"number"==typeof s&&(s=new Date,s.setTime(s.getTime()+i*On)),s instanceof Date&&(u+="; expires="+s.toUTCString()),J(r)&&(u+="; domain="+r),J(o)&&(u+="; path="+o),a&&(u+="; secure"),t.cookie=e+"="+u,this},remove:function(e,t,n,r){return this.set(e,"",t,-1,n,r),this}},Nn=/y|m|d|h|i|s/gi,In=/^\d{13}$/,Un=/^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,kn=/\d{4}-\d{2}-\d{2}/;at({normalizeDate:A,formatDate:x});var $n=function(){return Math.random().toString(36).substring(2,15)},Rn=0,Mn=$n()+$n(),Fn=function(){return qn.set(U("tokenName"),Mn,"","","/"),Mn};U({tokenName:"MIIEE_JTOKEN",request:{code:{fail:-1,success:100},msg:{def:"请求失败！请重试！",0:"无法连接到服务器！请检查网络连接！",500:"服务器出错!",timeout:"请求超时！",abort:"请求被终止！",parsererror:"服务器出错或数据解析出错！"}}}),n.generateToken=Fn,yn("request",["jquery"],function(e){var t=U("request"),r=t.code,i=t.msg,o=function(t,n,a){return Rn?(setTimeout(function(){o(t,n,a)},50),!1):(Rn=1,t.data.jtoken=Fn(),e.ajax(t).done(function(e){var r,i;e&&(r=e.code,i=e.result,i&&(i.code=r,i.msg=e.msg,i.result=at(!0,B(i)?[]:{},i),e=i)),r===n?a.resolve(e,t):a.reject(r,e,t)}).fail(function(e,n){a.reject(r.fail,{code:r.fail,url:t.url,msg:i[e.status]||i[n]||i.def})}).always(function(){Rn=0}),void 0)},a=function(t,i,a){var u=e.Deferred(),s={type:"post",dataType:"json",timeout:1e4};return"object"==typeof t?(s=at(s,t),a=i):at(s,{url:t,data:i}),a=a||r.success,i=s.data||{},t=n.addQueryParam(s.url.trim(),"_",Date.now()),K(i)&&(i=xt(i)),s.url=t,s.data=i,o(s,a,u),u.promise()};return a})}("undefined"!=typeof window?window:this,document,"tbtx");