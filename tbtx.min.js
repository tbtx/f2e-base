!function(a,b,c){function d(a,c){c||(c=a,a=b);for(var d in c)a[d]=c[d];return a}var e=a.console&&console.log,f=function(){};b=a[b]=a[b]||{},d({log:e?function(a,b,c){return c&&(a=c+": "+a),console[b&&console[b]?b:"log"](a),this}:f,error:function(a){throw a instanceof Error?a:new Error(a)},global:a,noop:f,Config:{debug:-1!==location.search.indexOf("debug")?!0:!1,fns:{}},config:function(a,d){var e,f=b,g=f.Config,h=g.fns,i=f;return"string"==typeof a?(e=h[a],d===c?i=e?e.call(f):g[a]:e?i=e.call(f,d):g[a]=d):b.each(a,function(a,b){var c=h[b];c?c.call(f,a):g[b]=a}),i},mix:d})}(this,"tbtx"),function(a,b){var c=a.global,d=Array.prototype,e=Object.prototype,f=String.prototype,g=Function.prototype,h=e.toString,i=e.hasOwnProperty,j=d.slice,k=function(a,b){return i.call(a,b)},l="",m=/^\s+|\s+$/g,n=/[^, ]+/g,o=/\\?\{\{\s*([^{}\s]+)\s*\}\}/g,p=/<[^>]+>/g,q=/<script[^>]*>([\S\s]*?)<\/script>/gim;if(!Object.keys){var r=!{toString:1}.propertyIsEnumerable("toString"),s=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toString","toLocaleString","valueOf"];Object.keys=function(a){var b,c,d=[];for(b in a)k(a,b)&&d.push(b);if(r)for(c=s.length-1;c>=0;c--)b=s[c],k(a,b)&&d.push(b);return d}}a.keys=Object.keys,g.bind||(g.bind=function(a){var b=j.call(arguments,1),d=this,e=function(){},f=function(){return d.apply(this instanceof e&&a?this:a||c,b.concat(j.call(arguments)))};return e.prototype=this.prototype,f.prototype=new e,f}),a.bind=function(a,b){return a.bind(b)},Date.now||(Date.now=function(){return+new Date}),a.Now=Date.now,f.trim||(f.trim=function(){return this.replace(m,l)}),a.trim=function(a){return a.trim()},d.forEach||(d.forEach=function(a,b){for(var c=0,d=this.length;d>c;c++)a.call(b,this[c],c,this)}),d.map||(d.map=function(a,b){for(var c=[],d=0,e=this.length;e>d;d++)c.push(a.call(b,this[d],d,this));return c}),d.filter||(d.filter=function(a,b){for(var c,d=[],e=0,f=this.length;f>e;e++)c=this[e],a.call(b,c,e,this)&&d.push(c);return d}),d.some||(d.some=function(a,b){for(var c=0,d=this.length;d>c;c++)if(a.call(b,this[c],c,this))return!0;return!1}),d.every||(d.every=function(a,b){for(var c=0,d=this.length;d>c;c++)if(!a.call(b,this[c],c,this))return!1;return!0}),d.indexOf||(d.indexOf=function(a,b){var c,d=-1,e=this.length;for(c=1*b||0,c=c>=0?c:Math.max(0,e+c);e>c;c++)if(this[c]===a)return c;return d}),d.lastIndexOf||(d.lastIndexOf=function(a,b){var c=-1,d=this.length,e=d-1;for(b=1*b||d-1,e=Math.min(e,b);e>-1;e--)if(this[e]===a)return e;return c}),d.reduce||(d.reduce=function(a,c){var d=c,e=0,f=this.length;for(c===b&&(d=this[0],e=1);f>e;e++)d=a(d,this[e],e,this);return d}),d.reduceRight||(d.reduceRight=function(a,c){var d=this.length,e=d-1,f=c;for(c===b&&(f=this[d-1],e--);e>-1;e--)f=a(f,this[e],e,this);return f}),"forEach map filter every some".replace(n,function(b){a[b]=function(c,e,f){if(c){if(c.length===+c.length&&(c=D(c)),c[b]===d[b])return c[b](e,f);var g=Object.keys(c),h={};return a.inArray(["map","filter"],b)?(g[b](function(a){var d=c[a],g=e.call(f,d,a,c);return"filter"===b&&g&&(h[a]=d),"map"===b&&(h[a]=g),g}),h):g[b](function(a,b){return b=c[a],e.call(f,b,a,c)})}}}),"reduce reduceRight".replace(n,function(c){a[c]=function(a,d,e){return a.length===+a.length&&(a=D(a)),e===b?a[c](d):a[c](d,e)}}),"indexOf lastIndexOf".replace(n,function(b){a[b]=function(a,c,d){return a.length!==+a.length||x(a)||(a=D(a)),a[b](c,d)}});var t={};"Boolean Number String Function Array Date RegExp Object".replace(n,function(b,c){t["[object "+b+"]"]=c=b.toLowerCase(),a["is"+b]=function(a){return A(a)===c}});var u=Array.isArray=a.isArray=Array.isArray||a.isArray,v=a.isFunction,w=a.isObject,x=a.isString,y=a.each=function(a,b,c){if(a){var d,e,f=0,g=a.length;if(c=c||null,g===+g)for(;g>f&&b.call(c,a[f],f,a)!==!1;f++);else for(e=Object.keys(a),g=e.length;g>f&&(d=e[f],b.call(c,a[d],d,a)!==!1);f++);}},z=function(a,b){var c;return function(){return c||(c=a.apply(b,arguments))}},A=function(a){return null==a?String(a):t[h.call(a)]||"object"},B=function(a){return null!=a&&a==a.window},C=function(a){if(!w(a)||a.nodeType||B(a))return!1;var c,d;try{if((d=a.constructor)&&!k(a,"constructor")&&!k(d.prototype,"isPrototypeOf"))return!1}catch(e){return!1}for(c in a);return c===b||k(a,c)},D=function(a){if(null==a)return[];if(u(a))return a;var b=[],c=0,d=a.length,e=typeof d,f=typeof a;if("number"!==e||"string"==typeof a.nodeName||B(a)||"string"===f||"function"===f&&!("item"in a&&"number"===e))return[a];for(;d>c;c++)b[c]=a[c];return b},E=function(){var a,c,d,e,f,g,h=arguments[0]||{},i=1,j=arguments.length,k=!1;for("boolean"==typeof h&&(k=h,h=arguments[i]||{},i++),"object"==typeof h||v(h)||(h={}),i===j&&(h=this,i--);j>i;i++)if(null!=(f=arguments[i]))for(e in f)a=h[e],d=f[e],h!==d&&(k&&d&&(C(d)||(c=u(d)))?(c?(c=!1,g=a&&u(a)?a:[]):g=a&&C(a)?a:{},h[e]=E(k,g,d)):d!==b&&(h[e]=d));return h},F={"&amp;":"&","&gt;":">","&lt;":"<","&#x60;":"`","&#x2F;":"/","&quot;":'"',"&#x27;":"'"},G={},H=z(function(){var a=l;return y(F,function(b){a+=b+"|"}),a=a.slice(0,-1),new RegExp(a,"g")}),I=z(function(){var a=l;return y(G,function(b){a+=b+"|"}),a+="&#(\\d{1,5});",new RegExp(a,"g")}),J=function(a){return(a+l).replace(H(),function(a){return G[a]})},K=function(a){return(a+l).replace(I(),function(a){return F[a]})};y(F,function(a,b){G[a]=b});var L=0;a.mix({rword:n,uniqueCid:function(a){return a=a||0,a+L++},nextTick:c.setImmediate?setImmediate.bind(c):function(a){setTimeout(a,0)},isNotEmptyString:function(a){return x(a)&&a!==l},isWindow:B,isPlainObject:C,extend:E,inArray:function(a,b){return a.indexOf(b)>-1},erase:function(a,b){var c=b.indexOf(a);return c>-1&&b.splice(c,1),b},type:A,makeArray:D,singleton:z,unique:function(a){var b={};return a.filter(function(a){var c=typeof a+a;return 1!==b[c]?(b[c]=1,!0):!1})},namespace:function(){var a,b,d,e=arguments,f=e.length,g=this;for(a=0;f>a;a++)for(d=(l+e[a]).split("."),b=c[d[0]]===g?1:0;b<d.length;++b)g=g[d[b]]=g[d[b]]||{};return g},ucfirst:function(a){return a.charAt(0).toUpperCase()+a.substring(1)},startsWith:function(a,b){return 0===a.lastIndexOf(b,0)},endsWith:function(a,b){var c=a.length-b.length;return c>=0&&a.indexOf(b,c)===c},random:function(a,b){var c,d;return u(a)&&(c=a,a=0,b=c.length-1),null==b&&(b=a,a=0),d=a+Math.floor(Math.random()*(b-a+1)),c?c[d]:d},later:function(b,c,d,e,f){c=c||0;var g,h,i=b,j=D(f);return x(b)&&(i=e[b]),i||a.error("later: method undefined"),g=function(){i.apply(e,j)},h=d?setInterval(g,c):setTimeout(g,c),{id:h,interval:d,cancel:function(){this.interval?clearInterval(h):clearTimeout(h)}}},throttle:function(a,b,c){if(c=c||this,b=b||150,-1===b)return a.bind(c);var d=Date.now();return function(){var e=Date.now();e-d>b&&(d=e,a.apply(c,arguments))}},debounce:function(b,c,d){if(d=d||this,c=c||150,-1===c)return b.bind(d);var e=null,f=function(){f.stop(),e=a.later(b,c,0,d,arguments)};return f.stop=function(){e&&(e.cancel(),e=0)},f},substitute:function(a,c,d){return x(a)&&(C(c)||u(c))?a.replace(o,function(a,e){return"\\"===a.charAt(0)?a.slice(1):c[e]===b?d?a:l:c[e]}):a},stripTags:function(a){return(a+l).replace(p,l)},stripScripts:function(a,b){var c,d;return b&&(b=D(b),c="("+b.join("|")+")",d=new RegExp(["<",c,"[^>]*([\\S\\s]*?)<\\/",c,">"].join(l),"img")),(a+l).replace(d||q,l)},truncate:function(a,b,c){return a+=l,c=c||"...",a.length>b?a.slice(0,b-c.length)+c:a},escapeHtml:J,unEscapeHtml:K})}(tbtx),function(a,b){function c(a){var b=typeof a;return null===a||"object"!==b&&"function"!==b}function d(a){if(f(a)){if("/"===a.charAt(0))return!0;var b=q.exec(a);return b&&!!b[1]}return!1}var e=a.each,f=a.isString,g=a.makeArray,h=a.log,i=a.rword,j="",k=function(a){return encodeURIComponent(a+j)},l=function(a){return decodeURIComponent(a.replace(/\+/g," "))},m=function(a,d,f){d=d||"&",f=f||"=";var g=[];return e(a,function(a,e){e=k(e),c(a)&&(g.push(e),a!==b&&g.push(f,k(a+j)),g.push(d))}),g.pop(),g.join(j)},n=function(a,c,d){if(!f(a)||!(a=a.trim()))return{};c=c||"&",d=d||"=";for(var e,g,i,j={},k=a.split(c),m=0,n=k.length;n>m;++m){if(e=k[m].indexOf(d),-1==e)g=l(k[m]),i=b;else{g=l(k[m].substring(0,e)),i=k[m].substring(e+1);try{i=l(i)}catch(o){h(o+"decodeURIComponent error : "+i,"error","unparam")}}j[g]=i}return j},o=a.Query=function(a){this._query=a||j,this._map=n(this._query)},p=o.prototype={get:function(a){var b=this._map;return a?b[a]:b},set:function(a,b){var c=this,d=c._map;return f(a)?d[a]=b:(a instanceof o&&(a=a.get()),e(a,function(a,b){d[b]=a})),c},remove:function(a){var b=this;return a?(a=g(a),a.forEach(function(a){delete b._map[a]})):b._map={},b},toString:function(){return m(this._map)}};p.add=p.set;var q=new RegExp(["^","(?:","([^:/?#]+)",":)?","(?://","(?:([^/?#]*)@)?","([^/?#:@]*)","(?::([0-9]+))?",")?","([^?#]+)?","(?:\\?([^#]*))?","(?:#(.*))?","$"].join(j)),r={scheme:1,credentials:2,domain:3,port:4,path:5,query:6,fragment:7},s=location.href;Uri=a.Uri=function(a){var b=this,c=Uri.getComponents(a);return e(c,function(a,c){if("query"===c)b.query=new o(a);else{try{a=l(a)}catch(d){h(d+"urlDecode error : "+a,"error","Uri")}b[c]=a}}),b},Uri.prototype={getFragment:function(){return this.fragment},toString:function(){var a=[],b=this,c=b.scheme,d=b.domain,e=b.path,f=b.port,g=b.fragment,h=b.query.toString(),i=b.credentials;return c&&(a.push(c),a.push(":")),d&&(a.push("//"),i&&(a.push(i),a.push("@")),a.push(k(d)),f&&(a.push(":"),a.push(f))),e&&a.push(e),h&&(a.push("?"),a.push(h)),g&&(a.push("#"),a.push(g)),a.join(j)}};var t={};Uri.getComponents=function(a){a=a||s;var b=t[a];if(b)return b;var c=a.match(q)||[],d={};return e(r,function(a,b){d[b]=c[a]||j}),t[a]=d,d},"add get remove set".replace(i,function(b){a[b+"QueryParam"]=function(){var a,c=g(arguments),e=c.length,f=c[0],h=c[e-1];d(f)?(a=f,c.shift()):d(h)&&(a=h,c.pop());var i=new Uri(a),k=i.query,l=k[b].apply(k,c);return l===k?i.toString():l||j}}),a.mix({urlEncode:k,urlDecode:l,param:m,unparam:n,isUri:d,parseUri:function(a){return Uri.getComponents(a)},getFragment:function(a){return new Uri(a).getFragment()}}),a.parseUrl=a.parseUri}(tbtx),function(a,b){var c=a.ucfirst,d=navigator.userAgent,e=b.createElement("tbtx"),f=e.style,g=" ",h="Webkit Moz O ms",i=h.split(g),j=function(a){return l(a,"pfx")},k=function(a,b){var c,d;for(d in a)if(c=a[d],void 0!==f[c])return"pfx"==b?c:!0;return!1},l=function(a,b){var d=c(a),e=(a+g+i.join(d+g)+d).split(g);return k(e,b)},m=a.namespace("support");m.add=function(a,b){return m[a]=b.call(m),this},"transition transform".split(g).forEach(function(a){m[a]=l(a)}),m.add("canvas",function(){var a=b.createElement("canvas");return!(!a.getContext||!a.getContext("2d"))}).add("mobile",function(){return!!d.match(/AppleWebKit.*Mobile.*/)||"ontouchstart"in b.documentElement}).add("pad",function(){return!!d.match(/iPad/i)}).add("phone",function(){return this.mobile&&!this.pad}).add("placeholder",function(){return"placeholder"in b.createElement("input")}),a.mix({testPropsAll:l,prefixed:j})}(tbtx,document),function(a,b){function c(){return D++}function d(a){return a.match(E)[0]}function e(a){for(a=a.replace(F,"/");a.match(G);)a=a.replace(G,"/");return a=a.replace(H,"$1/")}function f(a){var b=a.length-1,c=a.charAt(b);return"#"===c?a.substring(0,b):".js"===a.substring(b-2)||a.indexOf("?")>0||".css"===a.substring(b-3)||"/"===c?a:a+".js"}function g(a){var b=C.alias;return b&&w(b[a])?b[a]:a}function h(a){var b,c=C.paths;return c&&(b=a.match(I))&&w(c[b[1]])&&(a=c[b[1]]+b[2]),a}function i(a){var b=C.vars;return b&&a.indexOf("{")>-1&&(a=a.replace(J,function(a,c){return w(b[c])?b[c]:a})),a}function j(a){var b=C.map,c=a;if(b)for(var d=0,e=b.length;e>d;d++){var f=b[d];if(c=y(f)?f(a)||a:a.replace(f[0],f[1]),c!==a)break}return c}function k(a,b){var c,f=a.charAt(0);if(K.test(a))c=a;else if("."===f)c=e((b?d(b):C.cwd)+a);else if("/"===f){var g=C.cwd.match(L);c=g?g[0]+a.substring(1):a}else c=C.base+a;return 0===c.indexOf("//")&&(c=location.protocol+c),c}function l(a,b){if(!a)return"";a=g(a),a=h(a),a=i(a),a=f(a);var c=k(a,b);return c=j(c)}function m(a){return a.hasAttribute?a.src:a.getAttribute("src",4)}function n(a,b,c){b=b||A;var d=T.test(a),e=M.createElement(d?"link":"script");if(c){var f=y(c)?c(a):c;f&&(e.charset=f)}o(e,b,d),d?(e.rel="stylesheet",e.href=a):(e.async=!0,e.src=a),s=e,S?R.insertBefore(e,S):R.appendChild(e),s=null}function o(b,c,d){var e="onload"in b;if(d&&(U||!e))return void setTimeout(function(){p(b,c)},1);var f=function(){b.onload=b.onerror=b.onreadystatechange=null,d||R.removeChild(b),b=null,c()};e?(b.onload=f,b.onerror=function(b){a.log(b,"error","css"),f()}):b.onreadystatechange=function(){/loaded|complete/.test(b.readyState)&&f()}}function p(a,b){var c,d=a.sheet;if(U)d&&(c=!0);else if(d)try{d.cssRules&&(c=!0)}catch(e){"NS_ERROR_DOM_SECURITY_ERR"===e.name&&(c=!0)}setTimeout(function(){c?b():p(a,b)},20)}function q(){if(M.currentScript)return M.currentScript;if(s)return s;if(t&&"interactive"===t.readyState)return t;for(var a,b=R.getElementsByTagName("script"),c=b.length-1;c>=0;c--)if(a=b[c],"interactive"===a.readyState)return t=a}function r(a,b){this.uri=a,this.dependencies=b||[],this.exports=null,this.status=0,this._waitings={},this._remain=0}var s,t,u,v=a.isObject,w=a.isString,x=a.isArray,y=a.isFunction,z=a.global,A=a.noop,B=a.Loader={},C=B.data={},D=0,E=/[^?#]*\//,F=/\/\.\//g,G=/\/[^/]+\/\.\.\//,H=/([^:/])\/\//g,I=/^([^/:]+)(\/.+)$/,J=/{([^{]+)}/g,K=/^\/\/.|:\//,L=/^.*?\/\/.*?\//,M=document,N=d(location.href),O=M.scripts,P=O[O.length-1],Q=d(m(P)||N),R=M.head||M.getElementsByTagName("head")[0]||M.documentElement,S=R.getElementsByTagName("base")[0],T=/\.css(?:\?|$)/i,U=+navigator.userAgent.replace(/.*(?:AppleWebKit|AndroidWebKit)\/(\d+).*/,"$1")<536,V=B.cache={},W={},X={},Y={},Z=r.STATUS={FETCHING:1,SAVED:2,LOADING:3,LOADED:4,EXECUTING:5,EXECUTED:6};r.prototype={resolve:function(){var b=this,c=b.uri,d=b.dependencies;return a.map(d,function(a){return r.resolve(a,c)})},load:function(){var a=this;if(!(a.status>=Z.LOADING)){a.status=Z.LOADING;for(var b,c=a.resolve(),d=a._remain=c.length,e=0;d>e;e++)b=r.get(c[e]),b.status<Z.EXECUTED?b._waitings[a.uri]=(b._waitings[a.uri]||0)+1:a._remain--;if(0===a._remain)return void a.onload();for(e=0;d>e;e++)b=V[c[e]],b.status<Z.FETCHING?b.fetch():b.status===Z.SAVED&&b.load()}},onload:function(){var a=this;a.status=Z.LOADED,a.callback&&a.callback(),a.exec();var b,c,d=a._waitings;for(b in d)d.hasOwnProperty(b)&&(c=V[b],c._remain-=d[b],0===c._remain&&c.onload());delete a._waitings,delete a._remain},exec:function(){var a=this;if(a.status>=Z.EXECUTING)return a.exports;a.status=Z.EXECUTING;for(var c=(a.uri,a.resolve()),d=[],e=0,f=c.length;f>e;e++)d[e]=r.get(c[e]).exports;var g=a.factory,h=y(g)?g.apply(null,d):g;return h===b&&(h=a.exports),delete a.factory,a.exports=h,a.status=Z.EXECUTED,h},fetch:function(){function a(){n(d,b,C.charset)}function b(){delete W[d],X[d]=!0,u&&(r.save(d,u),u=null);var a,b=Y[d];for(delete Y[d];a=b.shift();)a.load()}var c=this,d=c.uri;return c.status=Z.FETCHING,!d||X[d]?void c.load():W[d]?void Y[d].push(c):(W[d]=!0,Y[d]=[c],void a())}},r.save=function(a,b){var c=r.get(a);c.status<Z.SAVED&&(c.id=b.id||a,c.dependencies=b.deps||[],c.factory=b.factory,c.status=Z.SAVED)},r.get=function(a,b){return V[a]||(V[a]=new r(a,b))},r.require=function(a,b,c){var d=r.get(c,x(a)?a:[a]);d.callback=function(){for(var a=[],c=d.resolve(),e=0,f=c.length;f>e;e++)a[e]=V[c[e]].exports;b&&b.apply(z,a),delete d.callback},d.load()},r.resolve=function(a,b){return l(a,b)},r.define=function(a,c,d){var e=arguments.length;1===e?(d=a,a=b):2===e&&(d=c,x(a)?(c=a,a=b):c=b),x(c)||(c=[]);var f={id:a,uri:r.resolve(a),deps:c,factory:d};if(!f.uri){var g=q();g&&(f.uri=g.src)}f.uri?r.save(f.uri,f):u=f},r.define.amd={},C.base=Q,C.dir=Q,C.cwd=N,C.charset="utf-8",B.config=function(a){for(var b in a){var c=a[b],d=C[b];if(d&&v(d))for(var e in c)d[e]=c[e];else x(d)?c=d.concat(c):"base"===b&&("/"!==c.slice(-1)&&(c+="/"),c=k(c)),C[b]=c}},B.resolve=l,z.define=a.define=r.define,a.require=function(b,d){return r.require(b,d,C.cwd+"_require_"+c()),a},r.register=function(a,b){var c=r.resolve(a),d=r.get(c);d.id=a||c,b&&(d.exports=b),d.status=Z.EXECUTED};var $,_=/\W/g;a.importStyle=function(c,d){if(!d||(d=d.replace(_,"-"),!M.getElementById(d))){var e;!$||d?(e=M.createElement("style"),d&&(e.id=d),R.appendChild(e)):e=$,e.styleSheet!==b?(M.getElementsByTagName("style").length>31&&a.error("Exceed the maximal count of style tags in IE"),e.styleSheet.cssText+=c):e.appendChild(M.createTextNode(c)),d||($=e)}},a.mix({register:r.register,realpath:e})}(tbtx),function(a){var b=a.realpath,c=a.Config.fns,d=a.Loader,e=d.data,f=d.config,g=e.dir,h=a.staticUrl=b(g+"../../../"),i={},j={events:"arale/events/1.1.0/events","class":"arale/class/1.1.0/class",base:"arale/base/1.1.1/base",widget:"arale/widget/1.1.1/widget",position:"arale/position/1.0.1/position",detector:"arale/detector/1.3.0/detector",router:"dist/router",overlay:"component/overlay/1.1.4/overlay",popup:"component/popup/1.0.0/popup",switchable:"component/switchable/1.0.3/switchable",validator:"component/validator/0.9.7/validator",jquery:a.support.phone?"gallery/jquery/2.1.1/jquery.min":"gallery/jquery/1.8.3/jquery.min",zepto:"gallery/zepto/1.1.2/zepto.min",handlebars:"gallery/handlebars/1.3.0/handlebars",json:"gallery/json2/json2",clipboard:"gallery/zeroclipboard/1.3.5/ZeroClipboard.min",easing:"plugin/jquery.easing.1.3",kissy:"http://g.tbcdn.cn/kissy/k/1.4.0/seed-min.js"};["dist","plugin","gallery","component"].forEach(function(a){i[a]=g+a}),i.arale=g+"dist/arale",j.$=j.jquery,f({base:h,alias:j,paths:i}),a.config("debug")||f({map:[[/^(.*\.(?:css|js))(.*)$/i,"$1?t="+Math.floor(Date.now()/36e5)]]}),"alias map paths".replace(a.rword,function(a){c[a]=function(b){if(!b)return e[a];var c={};c[a]=b,f(c)}})}(tbtx),function(a){var b=a.isNotEmptyString,c=document,d=864e5,e=encodeURIComponent,f=decodeURIComponent,g={get:function(a){var d,e;return b(a)&&(e=String(c.cookie).match(new RegExp("(?:^| )"+a+"(?:(?:=([^;]*))|;|$)")))&&(d=e[1]?f(e[1]):""),d},set:function(a,f,g,h,i,j){var k=String(e(f)),l=h;return"number"==typeof l&&(l=new Date,l.setTime(l.getTime()+h*d)),l instanceof Date&&(k+="; expires="+l.toUTCString()),b(g)&&(k+="; domain="+g),b(i)&&(k+="; path="+i),j&&(k+="; secure"),c.cookie=a+"="+k,this},remove:function(a,b,c,d){return this.set(a,"",b,-1,c,d),this}};a.cookie=g}(tbtx),define("arale/events/1.1.0/events",[],function(){function a(){}function b(a,b,c,d){var e;if(a)for(var f=0,g=a.length;g>f;f+=2)e=a[f].apply(a[f+1]||c,b),e===!1&&d.status&&(d.status=!1)}var c=/\s+/;a.prototype.on=function(a,b,d){var e,f,g;if(!b)return this;for(e=this.__events||(this.__events={}),a=a.split(c);f=a.shift();)g=e[f]||(e[f]=[]),g.push(b,d);return this},a.prototype.off=function(a,b,e){var f,g,h,i;if(!(f=this.__events))return this;if(!(a||b||e))return delete this.__events,this;for(a=a?a.split(c):d(f);g=a.shift();)if(h=f[g])if(b||e)for(i=h.length-2;i>=0;i-=2)b&&h[i]!==b||e&&h[i+1]!==e||h.splice(i,2);else delete f[g];return this},a.prototype.trigger=function(a){var d,e,f,g,h,i,j=[],k={status:!0};if(!(d=this.__events))return this;for(a=a.split(c),h=1,i=arguments.length;i>h;h++)j[h-1]=arguments[h];for(;e=a.shift();)(f=d.all)&&(f=f.slice()),(g=d[e])&&(g=g.slice()),b(g,j,this,k),b(f,[e].concat(j),this,k);return k.status},a.mixTo=function(b){b=b.prototype||b;var c=a.prototype;for(var d in c)c.hasOwnProperty(d)&&(b[d]=c[d])};var d=Object.keys;return a}),define("arale/position/1.0.1/position",["jquery"],function(a){function b(b){b=g(b)||{},b.nodeType&&(b={element:b});var c=g(b.element)||j;if(1!==c.nodeType)throw new Error("posObject.element is invalid.");var d={element:c,x:b.x||0,y:b.y||0},e=c===j||"VIEWPORT"===c._id;return d.offset=function(){return k?{left:0,top:0}:e?{left:a(document).scrollLeft(),top:a(document).scrollTop()}:h(a(c)[0])},d.size=function(){var b=a(e?window:c);return{width:b.outerWidth(),height:b.outerHeight()}},d}function c(a){a.x=d(a.x,a,"width"),a.y=d(a.y,a,"height")}function d(a,b,c){if(a+="",a=a.replace(/px/gi,""),/\D/.test(a)&&(a=a.replace(/(?:top|left)/gi,"0%").replace(/center/gi,"50%").replace(/(?:bottom|right)/gi,"100%")),-1!==a.indexOf("%")&&(a=a.replace(/(\d+(?:\.\d+)?)%/gi,function(a,d){return b.size()[c]*(d/100)})),/[+\-*\/]/.test(a))try{a=new Function("return "+a)()}catch(d){throw new Error("Invalid position value: "+a)}return f(a)}function e(b){var c=b.offsetParent();c[0]===document.documentElement&&(c=a(document.body)),m&&c.css("zoom",1);var d;return d=c[0]===document.body&&"static"===c.css("position")?{top:0,left:0}:h(c[0]),d.top+=f(c.css("border-top-width")),d.left+=f(c.css("border-left-width")),d}function f(a){return parseFloat(a,10)||0}function g(b){return a(b)[0]}function h(a){var b=a.getBoundingClientRect(),c=document.documentElement;return{left:b.left+(window.pageXOffset||c.scrollLeft)-(c.clientLeft||document.body.clientLeft||0),top:b.top+(window.pageYOffset||c.scrollTop)-(c.clientTop||document.body.clientTop||0)}}var i={},j={_id:"VIEWPORT",nodeType:1},k=!1,l=(window.navigator.userAgent||"").toLowerCase(),m=-1!==l.indexOf("msie 6");return i.pin=function(d,f){d=b(d),f=b(f);var g=a(d.element);"fixed"!==g.css("position")||m?(g.css("position","absolute"),k=!1):k=!0,c(d),c(f);var h=e(g),i=f.offset(),j=i.top+f.y-d.y-h.top,l=i.left+f.x-d.x-h.left;g.css({left:l,top:j})},i.center=function(a,b){i.pin({element:a,x:"50%",y:"50%"},{element:b,x:"50%",y:"50%"})},i.VIEWPORT=j,i}),function(a){function b(a,b){return m.test(typeof a)&&(b=[a,a=b][0]),a=a||"Y-m-d h:i:s",b=c(b),a.replace(l,function(a){return b[a]})}function c(a){a=e(a);var b={Y:a.getFullYear(),M:a.getMonth()+1,D:a.getDate(),H:a.getHours(),I:a.getMinutes(),S:a.getSeconds()},c={};return h(b,function(a,b){a=j+a,c[b]=a,b=b.toLowerCase(),c[b]="y"===b?a.substring(2,4):f(a)}),c.origin=a,c}function d(a,b){a=e(a),b=e(b);var c=Math.abs(a-b)/1e3,d=c,f={};return"day hour minute second".replace(k,function(a){var b=o[a],c=i(d/b);f[a]=c,d-=b*c}),f}function e(a){return g(a)?new Date(+a):n.test(typeof a)?new Date(a):new Date}function f(a){return a=j+a,1===a.length?"0"+a:a}var g=a.isDate,h=a.each,i=Math.floor,j="",k=a.rword,l=/y|m|d|h|i|s/gi,m=/number|object/,n=/number|string/,o={second:1,minute:60,hour:3600,day:86400};a.mix({normalizeDate:c,diffDate:d,makeDate:e,formatDate:b})}(tbtx),define("request",["jquery","json"],function(a){function b(a,b){return JSON.stringify(a)==JSON.stringify(b)}var c=tbtx,d=c.cookie,e=c.isPlainObject,f=c.config,g=c.generateToken=function(){var a=Math.random().toString().substr(2)+Date.now().toString().substr(1)+Math.random().toString().substr(2);return d.set(f("tokenName"),a,"","","/"),a};f("tokenName")||f("tokenName","MIIEE_JTOKEN"),f({requestFailCode:-1,requestFailMsg:"请求失败！请检查网络连接！",requestingCode:-2,requestSuccessCode:100});var h={},i={},j=function(d,j,k,l){var m={type:"post",dataType:"json",timeout:1e4};e(d)?(m=c.extend(m,d),l=k,k=j):(j=j||{},m.url=d,m.data=j),d=m.url.trim(),j=m.data,"boolean"==typeof k&&(l=k,k=0),k=k||f("requestSuccessCode");var n=h[d];return!l&&n&&"pending"===n.state()&&b(j,i[d])?(n.notify(f("requestingCode")),n.promise()):(n=h[d]=a.Deferred(),i[d]=j,e(j)&&!j.jtoken&&(j.jtoken=g()),m.url=c.addQueryParam(d,"_",String(Math.random()).replace(/\D/g,"")),a.ajax(m).done(function(a){var b,d;a&&(b=a.code,d=a.result),b===k?(d&&(a=d,a.result=c.extend(Array.isArray(a)?[]:{},a)),n.resolve(a)):n.reject(b,a)}).fail(function(){n.reject(f("requestFailCode"),{code:f("requestFailCode"),msg:f("requestFailMsg")})}),n.promise())};return c.Request=c.request=j,j}),define("msg",["widget","position","base/2.0/css/msg.css"],function(a,b){var c=tbtx,d=a.extend({attrs:{visible:!1,msg:"",duration:4e3,direction:"center"},events:{click:"clear"},_onRenderVisible:function(a){this.element[a?"fadeIn":"fadeOut"]()},clear:function(){var a=this;a.set("msg","")},_onRenderMsg:function(a){var b=this,d=this.get("duration");return b.timer&&b.timer.cancel(),a?(b.element.html(a),b.set("visible",!0),b.pin(),void(d>0&&(b.timer=c.later(b.clear,d,!1,b)))):void b.set("visible",!1)},pin:function(){var a=this,c=a.element,d=a.get("direction");"center"===d?b.center(c):b.pin({element:c,x:"50%",y:"top"===d?-60:"100%+60"},{element:b.VIEWPORT,x:"50%",y:"top"===d?0:"100%"})}}),e=c.singleton(function(){return new d({className:"tbtx-broadcast"}).render()}),f=function(a,b,d){var f=e();return d&&f.set("duration",d),f.set("msg",a),f.set("direction",b||"center"),c};return c.broadcast=f,f}),function(a){var b=a.global,c=a.register;a.define.amd.jQuery=!0,b.JSON&&c("json");var d=b.jQuery||b.Zepto;d&&(c("jquery",d),c("$",d)),a.require("events",function(b){a.Events=b,b.mixTo(a)});var e={broadcast:{module:"msg"},pin:{module:"position"},center:{module:"position"}};a.each(e,function(b,c){var d=b.module||c;a[c]=function(){var b=arguments;a.require(d,function(d){var e=d[c]||d;e.apply(a,b)})}})}(tbtx);