!function(a,b){function c(a,b){b||(b=a,a=this);for(var c in b)a[c]=b[c];return a}var d=a.console&&console.log,e=function(){};b=a[b]=a[b]||{},c(b,{log:d?function(a,b,c){return c&&(a=c+": "+a),console[b&&console[b]?b:"log"](a),this}:e,error:function(a){throw a instanceof Error?a:new Error(a)},global:a,noop:e,mix:c})}(this,"tbtx"),function(a,b){var c=a.global,d=Array.prototype,e=Object.prototype,f=String.prototype,g=Function.prototype,h=e.toString,i=d.slice,j=e.hasOwnProperty,k=function(a,b){return j.call(a,b)},l="";if(!Object.keys){var m=!{toString:1}.propertyIsEnumerable("toString"),n=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toString","toLocaleString","valueOf"];Object.keys=function(a){var b,c,d=[];for(b in a)k(a,b)&&d.push(b);if(m)for(c=n.length-1;c>=0;c--)b=n[c],k(a,b)&&d.push(b);return d}}if(a.keys=Object.keys,g.bind||(g.bind=function(a){var b=i.call(arguments,1),d=this,e=function(){},f=function(){return d.apply(this instanceof e&&a?this:a||c,b.concat(i.call(arguments)))};return e.prototype=this.prototype,f.prototype=new e,f}),a.bind=function(a,b){return a.bind(b)},Date.now||(Date.now=function(){return+new Date}),a.Now=Date.now,!f.trim){var o=/^\s+|\s+$/g;f.trim=function(){return this.replace(o,l)}}a.trim=function(a){return a.trim()},d.forEach||(d.forEach=function(a,b){for(var c=0,d=this.length;d>c;c++)a.call(b,this[c],c,this)}),d.map||(d.map=function(a,b){for(var c=[],d=0,e=this.length;e>d;d++)c.push(a.call(b,this[d],d,this));return c}),d.filter||(d.filter=function(a,b){for(var c,d=[],e=0,f=this.length;f>e;e++)c=this[e],a.call(b,c,e,this)&&d.push(c);return d}),d.some||(d.some=function(a,b){for(var c=0,d=this.length;d>c;c++)if(a.call(b,this[c],c,this))return!0;return!1}),d.every||(d.every=function(a,b){for(var c=0,d=this.length;d>c;c++)if(!a.call(b,this[c],c,this))return!1;return!0}),d.indexOf||(d.indexOf=function(a,b){var c,d=-1,e=this.length;for(c=1*b||0,c=c>=0?c:Math.max(0,e+c);e>c;c++)if(this[c]===a)return c;return d}),d.lastIndexOf||(d.lastIndexOf=function(a,b){var c=-1,d=this.length,e=d-1;for(b=1*b||d-1,e=Math.min(e,b);e>-1;e--)if(this[e]===a)return e;return c}),d.reduce||(d.reduce=function(a,c){var d=c,e=0,f=this.length;for(c===b&&(d=this[0],e=1);f>e;e++)d=a(d,this[e],e,this);return d}),d.reduceRight||(d.reduceRight=function(a,c){var d=this.length,e=d-1,f=c;for(c===b&&(f=this[d-1],e--);e>-1;e--)f=a(f,this[e],e,this);return f}),"forEach map filter every some".split(" ").forEach(function(b){a[b]=function(c,e,f){if(null==c)return c;if(c.length===+c.length&&(c=z(c)),c[b]===d[b])return c[b](e,f);var g=Object.keys(c),h={};return a.inArray(["map","filter"],b)?(g[b](function(a){var d=c[a],g=e.call(f,d,a,c);return"filter"===b&&g&&(h[a]=d),"map"===b&&(h[a]=g),g}),h):g[b](function(a,b){return b=c[a],e.call(f,b,a,c)})}}),"reduce reduceRight".split(" ").forEach(function(c){a[c]=function(a,d,e){return a.length===+a.length&&(a=z(a)),e===b?a[c](d):a[c](d,e)}}),"indexOf lastIndexOf".split(" ").forEach(function(b){a[b]=function(a,c,d){return a.length!==+a.length||t(a)||(a=z(a)),a[b](c,d)}});var p={};"Boolean Number String Function Array Date RegExp Object".split(" ").forEach(function(b,c){p["[object "+b+"]"]=c=b.toLowerCase(),a["is"+b]=function(a){return w(a)===c}});var q=Array.isArray=a.isArray=Array.isArray||a.isArray,r=a.isFunction,s=a.isObject,t=a.isString,u=a.each=function(a,b,c){if(null==a)return a;var d,e,f=0,g=a.length;if(c=c||null,g===+g)for(;g>f&&b.call(c,a[f],f,a)!==!1;f++);else for(e=Object.keys(a),g=e.length;g>f&&(d=e[f],b.call(c,a[d],d,a)!==!1);f++);},v=function(a,b){var c;return function(){return c||(c=a.apply(b,arguments))}},w=function(a){return null==a?String(a):p[h.call(a)]||"object"},x=function(a){return null!=a&&a==a.window},y=function(a){if(!a||!s(a)||a.nodeType||x(a))return!1;var c,d;try{if((d=a.constructor)&&!k(a,"constructor")&&!k(d.prototype,"isPrototypeOf"))return!1}catch(e){return!1}for(c in a);return c===b||k(a,c)},z=function(a){if(null==a)return[];if(q(a))return a;var b=[],c=0,d=a.length,e=typeof d,f=typeof a;if("number"!==e||"string"==typeof a.nodeName||x(a)||"string"===f||"function"===f&&!("item"in a&&"number"===e))return[a];for(;d>c;c++)b[c]=a[c];return b},A=function(){var a,c,d,e,f,g,h=arguments[0]||{},i=1,j=arguments.length,k=!1;for("boolean"==typeof h&&(k=h,h=arguments[i]||{},i++),"object"==typeof h||r(h)||(h={}),i===j&&(h=this,i--);j>i;i++)if(null!=(f=arguments[i]))for(e in f)a=h[e],d=f[e],h!==d&&(k&&d&&(y(d)||(c=q(d)))?(c?(c=!1,g=a&&q(a)?a:[]):g=a&&y(a)?a:{},h[e]=A(k,g,d)):d!==b&&(h[e]=d));return h},B={"&amp;":"&","&gt;":">","&lt;":"<","&#x60;":"`","&#x2F;":"/","&quot;":'"',"&#x27;":"'"},C={},D=v(function(){var a=l;return u(B,function(b){a+=b+"|"}),a=a.slice(0,-1),new RegExp(a,"g")}),E=v(function(){var a=l;return u(C,function(b){a+=b+"|"}),a+="&#(\\d{1,5});",new RegExp(a,"g")}),F=function(a){return String(a).replace(D(),function(a){return C[a]})},G=function(a){return String(a).replace(E(),function(a){return B[a]})};u(B,function(a,b){C[a]=b}),a.mix({isNotEmptyString:function(a){return t(a)&&a!==l},isEmptyObject:function(a){for(var c in a)if(c!==b)return!1;return!0},isWindow:x,isPlainObject:y,extend:A,inArray:function(a,b){return a.indexOf(b)>-1},erase:function(a,b){for(var c=0,d=b.length;d>c;c++)if(a===b[c])return b.splice(c,1),b},type:w,makeArray:z,singleton:v,unique:function(a){var b={};return a.filter(function(a){var c=typeof a+a;return 1!==b[c]?(b[c]=1,!0):!1})},namespace:function(){var a,b,d,e=z(arguments),f=this,g=e.length;for(a=0;g>a;a++)for(d=(l+e[a]).split("."),b=c[d[0]]===f?1:0;b<d.length;++b)f=f[d[b]]=f[d[b]]||{};return f},ucfirst:function(a){return a.charAt(0).toUpperCase()+a.substring(1)},startsWith:function(a,b){return 0===a.lastIndexOf(b,0)},endsWith:function(a,b){var c=a.length-b.length;return c>=0&&a.indexOf(b,c)===c},later:function(b,c,d,e,f){c=c||0;var g,h,i=b,j=z(f);return"string"==typeof b&&(i=e[b]),i||a.log("method undefined","error","later"),g=function(){i.apply(e,j)},h=d?setInterval(g,c):setTimeout(g,c),{id:h,interval:d,cancel:function(){this.interval?clearInterval(h):clearTimeout(h)}}},throttle:function(a,b,c){if(c=c||this,b=b||150,-1===b)return function(){a.apply(c,arguments)};var d=Date.now();return function(){var e=Date.now();e-d>b&&(d=e,a.apply(c,arguments))}},debounce:function(b,c,d){if(d=d||this,c=c||150,-1===c)return function(){b.apply(d,arguments)};var e=null,f=function(){f.stop(),e=a.later(b,c,0,d,arguments)};return f.stop=function(){e&&(e.cancel(),e=0)},f},substitute:function(c,d,e){return a.isNotEmptyString(c)&&(y(d)||q(d))?c.replace(e||/\\?\{\{\s*([^{}\s]+)\s*\}\}/g,function(a,c){return"\\"===a.charAt(0)?a.slice(1):d[c]===b?l:d[c]}):c},escapeHtml:F,unEscapeHtml:G})}(tbtx),function(a,b){function c(a){var b=typeof a;return null===a||"object"!==b&&"function"!==b}function d(a){if(f(a)){var b=n.exec(a);return b&&b[1]}return!1}var e=a.each,f=a.isString,g=a.makeArray,h="",i=function(a){return encodeURIComponent(String(a))},j=function(a){return decodeURIComponent(a.replace(/\+/g," "))},k=function(a,d,f){d=d||"&",f=f||"=";var g=[];return e(a,function(a,e){e=i(e),c(a)&&(g.push(e),a!==b&&g.push(f,i(a+h)),g.push(d))}),g.pop(),g.join(h)},l=function(c,d,e){if(!f(c)||!(c=c.trim()))return{};d=d||"&",e=e||"=";for(var g,h,i,k={},l=c.split(d),m=0,n=l.length;n>m;++m){if(g=l[m].indexOf(e),-1==g)h=j(l[m]),i=b;else{h=j(l[m].substring(0,g)),i=l[m].substring(g+1);try{i=j(i)}catch(o){a.log(o+"decodeURIComponent error : "+i,"error","unparam")}}k[h]=i}return k},m=a.Query=function(a){this._query=a||h,this._map=l(this._query)};m.prototype={get:function(a){var b=this._map;return a?b[a]:b},set:function(a,b){var c=this,d=c._map;return f(a)?d[a]=b:(a instanceof m&&(a=a.get()),e(a,function(a,b){d[b]=a})),c},remove:function(a){var b=this;return a?(a=g(a),a.forEach(function(a){delete b._map[a]})):b._map={},b},add:function(a,b){var c=this,d=c._map;return f(a)?d[a]=b:(a instanceof m&&(a=a.get()),e(a,function(a,b){c.set(b,a)})),c},toString:function(){return k(this._map)}};var n=new RegExp(["^","(?:","([^:/?#]+)",":)?","(?://","(?:([^/?#]*)@)?","([^/?#:@]*)","(?::([0-9]+))?",")?","([^?#]+)?","(?:\\?([^#]*))?","(?:#(.*))?","$"].join(h)),o={scheme:1,credentials:2,domain:3,port:4,path:5,query:6,fragment:7},p=location.href,q=a.Uri=function(b){var c=this,d=q.getComponents(b);return e(d,function(b,d){if("query"===d)c.query=new m(b);else{try{b=j(b)}catch(e){a.log(e+"urlDecode error : "+b,"error","Uri")}c[d]=b}}),c};q.prototype={getFragment:function(){return this.fragment},toString:function(){var a=[],b=this,c=b.scheme,d=b.domain,e=b.path,f=b.port,g=b.fragment,j=b.query.toString(),k=b.credentials;return c&&(a.push(c),a.push(":")),d&&(a.push("//"),k&&(a.push(k),a.push("@")),a.push(i(d)),f&&(a.push(":"),a.push(f))),e&&a.push(e),j&&(a.push("?"),a.push(j)),g&&(a.push("#"),a.push(g)),a.join(h)}},q.getComponents=function(a){a=a||p;var b=a.match(n)||[],c={};return e(o,function(a,d){c[d]=b[a]||h}),c},"add get remove set".split(" ").forEach(function(b){a[b+"QueryParam"]=function(){var a,c=g(arguments),e=c.length,f=c[0],i=c[e-1];d(f)?(a=f,c.shift()):d(i)&&(a=i,c.pop());var j=new q(a),k=j.query,l=k[b].apply(k,c);return l===k?j.toString():l||h}}),a.mix({urlEncode:i,urlDecode:j,param:k,unparam:l,isUri:d,parseUri:function(a){return q.getComponents(a)},getFragment:function(a){return new q(a).getFragment()}}),a.parseUrl=a.parseUri}(tbtx),function(a,b){function c(){return D++}function d(a){return a.match(E)[0]}function e(a){for(a=a.replace(F,"/");a.match(G);)a=a.replace(G,"/");return a=a.replace(H,"$1/")}function f(a){var b=a.length-1,c=a.charAt(b);return"#"===c?a.substring(0,b):".js"===a.substring(b-2)||a.indexOf("?")>0||".css"===a.substring(b-3)||"/"===c?a:a+".js"}function g(a){var b=C.alias;return b&&w(b[a])?b[a]:a}function h(a){var b,c=C.paths;return c&&(b=a.match(I))&&w(c[b[1]])&&(a=c[b[1]]+b[2]),a}function i(a){var b=C.vars;return b&&a.indexOf("{")>-1&&(a=a.replace(J,function(a,c){return w(b[c])?b[c]:a})),a}function j(a){var b=C.map,c=a;if(b)for(var d=0,e=b.length;e>d;d++){var f=b[d];if(c=y(f)?f(a)||a:a.replace(f[0],f[1]),c!==a)break}return c}function k(a,b){var c,f=a.charAt(0);if(K.test(a))c=a;else if("."===f)c=e((b?d(b):C.cwd)+a);else if("/"===f){var g=C.cwd.match(L);c=g?g[0]+a.substring(1):a}else c=C.base+a;return 0===c.indexOf("//")&&(c=location.protocol+c),c}function l(a,b){if(!a)return"";a=g(a),a=h(a),a=i(a),a=f(a);var c=k(a,b);return c=j(c)}function m(a){return a.hasAttribute?a.src:a.getAttribute("src",4)}function n(a,b,c){b=b||A;var d=T.test(a),e=M.createElement(d?"link":"script");if(c){var f=y(c)?c(a):c;f&&(e.charset=f)}o(e,b,d),d?(e.rel="stylesheet",e.href=a):(e.async=!0,e.src=a),s=e,S?R.insertBefore(e,S):R.appendChild(e),s=null}function o(b,c,d){var e="onload"in b;if(d&&(U||!e))return void setTimeout(function(){p(b,c)},1);var f=function(){b.onload=b.onerror=b.onreadystatechange=null,d||R.removeChild(b),b=null,c()};e?(b.onload=f,b.onerror=function(b){a.log(b,"error","css"),f()}):b.onreadystatechange=function(){/loaded|complete/.test(b.readyState)&&f()}}function p(a,b){var c,d=a.sheet;if(U)d&&(c=!0);else if(d)try{d.cssRules&&(c=!0)}catch(e){"NS_ERROR_DOM_SECURITY_ERR"===e.name&&(c=!0)}setTimeout(function(){c?b():p(a,b)},20)}function q(){if(M.currentScript)return M.currentScript;if(s)return s;if(t&&"interactive"===t.readyState)return t;for(var a,b=R.getElementsByTagName("script"),c=b.length-1;c>=0;c--)if(a=b[c],"interactive"===a.readyState)return t=a}function r(a,b){this.uri=a,this.dependencies=b||[],this.exports=null,this.status=0,this._waitings={},this._remain=0}var s,t,u,v=a.isObject,w=a.isString,x=a.isArray,y=a.isFunction,z=a.global,A=a.noop,B=a.Loader={},C=B.data={},D=0,E=/[^?#]*\//,F=/\/\.\//g,G=/\/[^/]+\/\.\.\//,H=/([^:/])\/\//g,I=/^([^/:]+)(\/.+)$/,J=/{([^{]+)}/g,K=/^\/\/.|:\//,L=/^.*?\/\/.*?\//,M=document,N=d(location.href),O=M.scripts,P=O[O.length-1],Q=d(m(P)||N),R=M.head||M.getElementsByTagName("head")[0]||M.documentElement,S=R.getElementsByTagName("base")[0],T=/\.css(?:\?|$)/i,U=+navigator.userAgent.replace(/.*(?:AppleWebKit|AndroidWebKit)\/(\d+).*/,"$1")<536,V=B.cache={},W={},X={},Y={},Z=r.STATUS={FETCHING:1,SAVED:2,LOADING:3,LOADED:4,EXECUTING:5,EXECUTED:6};r.prototype={resolve:function(){var b=this,c=b.uri,d=b.dependencies;return a.map(d,function(a){return r.resolve(a,c)})},load:function(){var a=this;if(!(a.status>=Z.LOADING)){a.status=Z.LOADING;for(var b,c=a.resolve(),d=a._remain=c.length,e=0;d>e;e++)b=r.get(c[e]),b.status<Z.EXECUTED?b._waitings[a.uri]=(b._waitings[a.uri]||0)+1:a._remain--;if(0===a._remain)return void a.onload();for(e=0;d>e;e++)b=V[c[e]],b.status<Z.FETCHING?b.fetch():b.status===Z.SAVED&&b.load()}},onload:function(){var a=this;a.status=Z.LOADED,a.callback&&a.callback(),a.exec();var b,c,d=a._waitings;for(b in d)d.hasOwnProperty(b)&&(c=V[b],c._remain-=d[b],0===c._remain&&c.onload());delete a._waitings,delete a._remain},exec:function(){var a=this;if(a.status>=Z.EXECUTING)return a.exports;a.status=Z.EXECUTING;for(var c=(a.uri,a.resolve()),d=[],e=0,f=c.length;f>e;e++)d[e]=r.get(c[e]).exports;var g=a.factory,h=y(g)?g.apply(null,d):g;return h===b&&(h=a.exports),delete a.factory,a.exports=h,a.status=Z.EXECUTED,h},fetch:function(){function a(){n(d,b,C.charset)}function b(){delete W[d],X[d]=!0,u&&(r.save(d,u),u=null);var a,b=Y[d];for(delete Y[d];a=b.shift();)a.load()}var c=this,d=c.uri;return c.status=Z.FETCHING,!d||X[d]?void c.load():W[d]?void Y[d].push(c):(W[d]=!0,Y[d]=[c],void a())}},r.save=function(a,b){var c=r.get(a);c.status<Z.SAVED&&(c.id=b.id||a,c.dependencies=b.deps||[],c.factory=b.factory,c.status=Z.SAVED)},r.get=function(a,b){return V[a]||(V[a]=new r(a,b))},r.require=function(a,b,c){var d=r.get(c,x(a)?a:[a]);d.callback=function(){for(var a=[],c=d.resolve(),e=0,f=c.length;f>e;e++)a[e]=V[c[e]].exports;b&&b.apply(z,a),delete d.callback},d.load()},r.resolve=function(a,b){return l(a,b)},r.define=function(a,c,d){var e=arguments.length;1===e?(d=a,a=b):2===e&&(d=c,x(a)?(c=a,a=b):c=b),x(c)||(c=[]);var f={id:a,uri:r.resolve(a),deps:c,factory:d};if(!f.uri){var g=q();g&&(f.uri=g.src)}f.uri?r.save(f.uri,f):u=f},r.define.amd={},C.base=Q,C.dir=Q,C.cwd=N,C.charset="utf-8",B.config=function(a){for(var b in a){var c=a[b],d=C[b];if(d&&v(d))for(var e in c)d[e]=c[e];else x(d)?c=d.concat(c):"base"===b&&("/"!==c.slice(-1)&&(c+="/"),c=k(c)),C[b]=c}},B.resolve=l,z.define=a.define=r.define,a.require=function(b,d){return r.require(b,d,C.cwd+"_require_"+c()),a},r.register=function(a,b){var c=r.resolve(a),d=r.get(c);d.id=a||c,b&&(d.exports=b),d.status=Z.EXECUTED},a.mix({register:r.register,realpath:e})}(tbtx),function(a){var b=a.realpath,c=a.Loader,d=c.data.dir,e=a.staticUrl=b(d+"../../../"),f={};["dist","plugin","gallery","component"].forEach(function(a){f[a]=d+a}),f.arale=d+"dist/arale",c.config({base:e,alias:{events:"arale/events/1.1.0/events","class":"arale/class/1.1.0/class",base:"arale/base/1.1.1/base",widget:"arale/widget/1.1.1/widget",position:"arale/position/1.0.1/position",detector:"arale/detector/1.3.0/detector",router:"dist/router",overlay:"component/overlay/1.1.4/overlay",popup:"component/popup/1.0.0/popup",switchable:"component/switchable/1.0.3/switchable",validator:"component/validator/0.9.7/validator",jquery:"gallery/jquery/1.8.3/jquery.min",zepto:"gallery/zepto/1.1.2/zepto.min",handlebars:"gallery/handlebars/1.3.0/handlebars",json:"gallery/json2/json2",easing:"plugin/jquery.easing.1.3",kissy:"http://g.tbcdn.cn/kissy/k/1.4.0/seed-min.js"},paths:f})}(tbtx),function(a){var b=a.isNotEmptyString,c=document,d=864e5,e=encodeURIComponent,f=decodeURIComponent,g={get:function(a){var d,e;return b(a)&&(e=String(c.cookie).match(new RegExp("(?:^| )"+a+"(?:(?:=([^;]*))|;|$)")))&&(d=e[1]?f(e[1]):""),d},set:function(a,f,g,h,i,j){var k=String(e(f)),l=h;return"number"==typeof l&&(l=new Date,l.setTime(l.getTime()+h*d)),l instanceof Date&&(k+="; expires="+l.toUTCString()),b(g)&&(k+="; domain="+g),b(i)&&(k+="; path="+i),j&&(k+="; secure"),c.cookie=a+"="+k,this},remove:function(a,b,c,d){return this.set(a,"",b,-1,c,d),this}};a.cookie=g}(tbtx),define("arale/events/1.1.0/events",[],function(){function a(){}function b(a,b,c,d){var e;if(a)for(var f=0,g=a.length;g>f;f+=2)e=a[f].apply(a[f+1]||c,b),e===!1&&d.status&&(d.status=!1)}var c=/\s+/;a.prototype.on=function(a,b,d){var e,f,g;if(!b)return this;for(e=this.__events||(this.__events={}),a=a.split(c);f=a.shift();)g=e[f]||(e[f]=[]),g.push(b,d);return this},a.prototype.off=function(a,b,e){var f,g,h,i;if(!(f=this.__events))return this;if(!(a||b||e))return delete this.__events,this;for(a=a?a.split(c):d(f);g=a.shift();)if(h=f[g])if(b||e)for(i=h.length-2;i>=0;i-=2)b&&h[i]!==b||e&&h[i+1]!==e||h.splice(i,2);else delete f[g];return this},a.prototype.trigger=function(a){var d,e,f,g,h,i,j=[],k={status:!0};if(!(d=this.__events))return this;for(a=a.split(c),h=1,i=arguments.length;i>h;h++)j[h-1]=arguments[h];for(;e=a.shift();)(f=d.all)&&(f=f.slice()),(g=d[e])&&(g=g.slice()),b(g,j,this,k),b(f,[e].concat(j),this,k);return k.status},a.mixTo=function(b){b=b.prototype||b;var c=a.prototype;for(var d in c)c.hasOwnProperty(d)&&(b[d]=c[d])};var d=Object.keys;return a}),define("arale/position/1.0.1/position",["jquery"],function(a){function b(b){b=g(b)||{},b.nodeType&&(b={element:b});var c=g(b.element)||j;if(1!==c.nodeType)throw new Error("posObject.element is invalid.");var d={element:c,x:b.x||0,y:b.y||0},e=c===j||"VIEWPORT"===c._id;return d.offset=function(){return k?{left:0,top:0}:e?{left:a(document).scrollLeft(),top:a(document).scrollTop()}:h(a(c)[0])},d.size=function(){var b=a(e?window:c);return{width:b.outerWidth(),height:b.outerHeight()}},d}function c(a){a.x=d(a.x,a,"width"),a.y=d(a.y,a,"height")}function d(a,b,c){if(a+="",a=a.replace(/px/gi,""),/\D/.test(a)&&(a=a.replace(/(?:top|left)/gi,"0%").replace(/center/gi,"50%").replace(/(?:bottom|right)/gi,"100%")),-1!==a.indexOf("%")&&(a=a.replace(/(\d+(?:\.\d+)?)%/gi,function(a,d){return b.size()[c]*(d/100)})),/[+\-*\/]/.test(a))try{a=new Function("return "+a)()}catch(d){throw new Error("Invalid position value: "+a)}return f(a)}function e(b){var c=b.offsetParent();c[0]===document.documentElement&&(c=a(document.body)),m&&c.css("zoom",1);var d;return d=c[0]===document.body&&"static"===c.css("position")?{top:0,left:0}:h(c[0]),d.top+=f(c.css("border-top-width")),d.left+=f(c.css("border-left-width")),d}function f(a){return parseFloat(a,10)||0}function g(b){return a(b)[0]}function h(a){var b=a.getBoundingClientRect(),c=document.documentElement;return{left:b.left+(window.pageXOffset||c.scrollLeft)-(c.clientLeft||document.body.clientLeft||0),top:b.top+(window.pageYOffset||c.scrollTop)-(c.clientTop||document.body.clientTop||0)}}var i={},j={_id:"VIEWPORT",nodeType:1},k=!1,l=(window.navigator.userAgent||"").toLowerCase(),m=-1!==l.indexOf("msie 6");return i.pin=function(d,f){d=b(d),f=b(f);var g=a(d.element);"fixed"!==g.css("position")||m?(g.css("position","absolute"),k=!1):k=!0,c(d),c(f);var h=e(g),i=f.offset(),j=i.top+f.y-d.y-h.top,l=i.left+f.x-d.x-h.left;g.css({left:l,top:j})},i.center=function(a,b){i.pin({element:a,x:"50%",y:"50%"},{element:b,x:"50%",y:"50%"})},i.VIEWPORT=j,i}),function(a){var b=a.ucfirst,c=document.createElement("tbtx"),d=c.style,e="Webkit Moz O ms",f=e.split(" "),g=function(a){return i(a,"pfx")},h=function(a,b){var c,e;for(e in a)if(c=a[e],-1===c.indexOf("-")&&void 0!==d[c])return"pfx"==b?c:!0;return!1},i=function(a,c){var d=b(a),e=(a+" "+f.join(d+" ")+d).split(" ");return h(e,c)},j=a.namespace("support");"transition transform".split(" ").forEach(function(a){j[a]=i(a)}),a.mix({testPropsAll:i,prefixed:g})}(tbtx),function(a){function b(a,b){return"number"==typeof a&&(b=[a,a=b][0]),a=a||"Y-m-d h:i:s",h(c(b),function(b,c){a=a.replace(c,b)}),a}function c(a){a=e(a);var b,c,d={Y:a.getFullYear(),M:a.getMonth()+1,D:a.getDate(),H:a.getHours(),I:a.getMinutes(),S:a.getSeconds()},g={};for(c in d)d[c]=String(d[c]),g[c]=d[c],b=c.toLowerCase(),g[b]="y"==b?d[c].substring(2,4):f(d[c]);return g}function d(a,b){a=e(a),b=e(b);var c,d,f,g,h=60,i=60*h,j=24*i,k=Math.abs(a.getTime()-b.getTime())/1e3,l=k;return c=Math.floor(l/j),l-=c*j,d=Math.floor(l/i),l-=d*i,f=Math.floor(l/h),l-=f*h,g=Math.floor(l),{day:c,hour:d,minute:f,second:g}}function e(a){if(g(a))return a;var b=typeof a;return"number"==b||"string"==b?new Date(a):new Date}function f(a){return a=String(a),1===a.length?"0"+a:a}var g=a.isDate,h=a.each;a.mix({normalizeDate:c,diffDate:d,toDate:e,formatDate:b})}(tbtx),define("request",["jquery"],function(a){var b=tbtx,c=b.cookie,d=b.isPlainObject,e=function(){var a=Math.random().toString().substr(2)+(new Date).getTime().toString().substr(1)+Math.random().toString().substr(2);return c.set(b.tokenName,a,"","","/"),a};b.tokenName="MIIEE_JTOKEN";var f=-1,g={code:f,msg:"请求失败！请检查网络连接！"},h=-2,i={},j=function(b,c,j){var k;d(b)?(k=b,j=c):(c=c||{},d(c)&&!c.jtoken&&(c.jtoken=e()),k={url:b,data:c,type:"post",dataType:"json",timeout:1e4}),j=j||100;var l=i[b];return l&&"pending"===l.state()?(l.notify(h),l.promise()):(l=i[b]=a.Deferred(),a.ajax(k).done(function(a){var b=a&&a.code;b===j?l.resolve(a):l.reject(b,a)}).fail(function(){l.reject(f,g)}),l.promise())};return b.Request=b.request=j,j}),define("msg",["widget","position","base/2.0/css/msg.css"],function(a,b){var c=tbtx,d=a.extend({attrs:{visible:!1,msg:"",duration:4e3,direction:"center"},_onRenderVisible:function(a){this.element[a?"fadeIn":"fadeOut"]()},_onRenderMsg:function(a){var b=this,d=this.get("duration");return b.timer&&b.timer.cancel(),a?(b.element.html(a),b.set("visible",!0),void(d>0&&(b.timer=c.later(function(){b.set("visible",!1),b.set("msg","")},d,!1)))):void b.set("visible",!1)},_onRenderDirection:function(a){var c=this.element;"center"===a?b.center(c):b.pin({element:c,x:"50%",y:"top"===a?-60:"100%+60"},{element:b.VIEWPORT,x:"50%",y:"top"===a?0:"100%"})}}),e=c.singleton(function(){return new d({className:"tbtx-broadcast"}).render()});c.broadcast=function(a,b,d){var f=e();return d&&f.set("duration",d),f.set("direction",b||"center"),f.set("msg",a),c}}),function(a){var b=a.global,c=a.register;a.define.amd.jQuery=!0,b.JSON&&c("json");var d=b.jQuery||b.Zepto;d&&(c("jquery",d),c("$",d),a.require("request")),a.require("events",function(b){a.Events=b,b.mixTo(a)})}(tbtx);