!function(a,b){function c(a,c){c||(c=a,a=b);for(var d in c)a[d]=c[d];return a}var d=a.console&&console.log,e=function(){};b=a[b]=a[b]||{},c(b,{log:d?function(a,b,c){return c&&(a=c+": "+a),console[b&&console[b]?b:"log"](a),this}:e,global:a,noop:e,mix:c})}(this,"tbtx"),function(a,b,c){function d(a,b){return h.hasOwnProperty.call(a,b)}function e(a){var b=typeof a;return null===a||"object"!==b&&"function"!==b}function f(a){return"object"==typeof a}var g=Array.prototype,h=Object.prototype,i=String.prototype,j=Function.prototype,k=h.toString,l=g.slice,m=!1,n=!0,o="function",p=" ";if(typeof Object.keys!=o){var q=!{toString:1}.propertyIsEnumerable("toString"),r=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toString","toLocaleString","valueOf"];Object.keys=function(a){var b,c,e=[];for(b in a)e.push(b);if(q)for(c=r.length-1;c>=0;c--)b=r[c],d(a,b)&&e.push(b);return e}}b.keys=Object.keys,typeof j.bind!=o&&(j.bind=function(a){var b=l.call(arguments,1),c=this,d=function(){},e=function(){return c.apply(this instanceof d&&a?this:a,b.concat(l.call(arguments)))};return d.prototype=this.prototype,e.prototype=new d,e}),b.bind=function(a,b){return a.bind(b)},typeof Date.now!=o&&(Date.now=function(){return+new Date}),b.Now=Date.now;var s="	\n\f\r   ᠎             　\u2028\u2029﻿";if(!i.trim||s.trim()){s="["+s+"]";var t=new RegExp("^"+s+s+"*"),u=new RegExp(s+s+"*$");i.trim=function(){return String(this).replace(t,"").replace(u,"")}}b.trim=function(a){return a.trim()},typeof g.forEach!=o&&(g.forEach=function(a,b){for(var c=0,d=this.length;d>c;c++)a.call(b,this[c],c,this)}),typeof g.map!=o&&(g.map=function(a,b){for(var c=[],d=0,e=this.length;e>d;d++)c.push(a.call(b,this[d],d,this));return c}),typeof g.filter!=o&&(g.filter=function(a,b){for(var c,d=[],e=0,f=this.length;f>e;e++)c=this[e],a.call(b,c,e,this)&&d.push(c);return d}),typeof g.some!=o&&(g.some=function(a,b){for(var c=0,d=this.length;d>c;c++)if(a.call(b,this[c],c,this))return n;return m}),typeof g.every!=o&&(g.every=function(a,b){for(var c=0,d=this.length;d>c;c++)if(!a.call(b,this[c],c,this))return m;return n}),typeof g.indexOf!=o&&(g.indexOf=function(a,b){var c,d=-1,e=this.length;for(b=1*b||0,c=b,c=c>=0?c:Math.max(0,e+c);e>c;c++)if(this[c]===a)return c;return d}),typeof g.lastIndexOf!=o&&(g.lastIndexOf=function(a,b){var c=-1,d=this.length,e=d-1;for(b=1*b||d-1,e=Math.min(e,b);e>-1;e--)if(this[e]===a)return e;return c}),typeof g.reduce!=o&&(g.reduce=function(a,b){var d=b,e=0,f=this.length;for(b===c&&(d=this[0],e=1);f>e;e++)d=a(d,this[e],e,this);return d}),typeof g.reduceRight!=o&&(g.reduceRight=function(a,b){var d=this.length,e=d-1,f=b;for(b===c&&(f=this[d-1],e--);e>-1;e--)f=a(f,this[e],e,this);return f}),"forEach map filter every some".split(p).forEach(function(a){b[a]=function(b,c,d){if(!b)return b;if(w(b))return b[a](c,d);var e,f=Object.keys(b),g=f.map(function(a){return b[a]}),h=g[a](function(g,h){var i=f[h],j=c.call(d,g,i,b);return"filter"===a&&j&&(e=e||{},e[i]=g),"map"===a&&(e=e||{},e[i]=j),j});return e||h}}),"reduce reduceRight".split(p).forEach(function(a){b[a]=function(b,d,e){return e===c?b[a](d):b[a](d,e)}}),"indexOf lastIndexOf".split(p).forEach(function(a){b[a]=function(b,c,d){return b[a](c,d)}});var v={};"Boolean Number String Function Array Date RegExp Object".split(" ").forEach(function(a,c){v["[object "+a+"]"]=c=a.toLowerCase(),b["is"+a]=function(a){return C(a)===c}});var w=Array.isArray=b.isArray=Array.isArray||b.isArray,x=(b.isFunction,b.isObject),y=b.isString,z=b.each=function(a,b,c){var d,e,f,g=0;if(c=c||null,w(a))for(f=a.length;f>g&&b.call(c,a[g],g,a)!==m;g++);else for(e=Object.keys(a),f=e.length;f>g&&(d=e[g],b.call(c,a[d],d,a)!==m);g++);},A="",B=function(a,b){var c;return function(){return c||(c=a.apply(b,arguments))}},C=function(a){return null===a?String(a):v[k.call(a)]||"object"},D=function(a,b){return a.indexOf(b)>-1},E=function(a){return null!=a&&a==a.window},F=function(a){if(!a||!x(a)||a.nodeType||E(a))return m;var b,e;try{if((e=a.constructor)&&!d(a,"constructor")&&!d(e.prototype,"isPrototypeOf"))return m}catch(f){return m}for(b in a);return b===c||d(a,b)},G=function(a){var b=[];if(null==a)return b;if(w(a))return a;var c=typeof a.length,d=typeof a;if("number"!==c||"string"==typeof a.nodeName||null!=a&&a==a.window||"string"===d||"function"===d&&!("item"in a&&"number"===c))return[a];for(var e=0,f=a.length;f>e;e++)b[e]=a[e];return b},H=function(a){if(!a||!f(a))return a;var b,c=w(a)?[]:{};for(b in a)d(a,b)&&(c[b]=f(a)?H(a[b]):a[b]);return c},I={"&amp;":"&","&gt;":">","&lt;":"<","&#x60;":"`","&#x2F;":"/","&quot;":'"',"&#x27;":"'"},J={},K=B(function(){var a=A;return z(I,function(b){a+=b+"|"}),a=a.slice(0,-1),new RegExp(a,"g")}),L=B(function(){var a=A;return z(J,function(b){a+=b+"|"}),a+="&#(\\d{1,5});",new RegExp(a,"g")}),M=function(a){return String(a).replace(K(),function(a){return J[a]})},N=function(a){return String(a).replace(L(),function(a){return I[a]})};for(var O in I)J[I[O]]=O;b.mix({isNotEmptyString:function(a){return y(a)&&a!==A},isEmptyObject:function(a){return 0===Object.keys(a).length},pluck:function(a,c){var d=c.split(".");return b.map(a,function(a){for(var b=0,c=d.length;c>b;b++)a=a[d[b]];return a})},isWindow:E,isPlainObject:F,inArray:D,type:C,makeArray:G,deepCopy:H,later:function(a,c,d,e,f){c=c||0;var g,h,i=a,j=G(f);return"string"==typeof a&&(i=e[a]),i||b.log("method undefined","error","later"),g=function(){i.apply(e,j)},h=d?setInterval(g,c):setTimeout(g,c),{id:h,interval:d,cancel:function(){this.interval?clearInterval(h):clearTimeout(h)}}},singleton:B,unique:function(a){var b={};return a.filter(function(a){var c=typeof a+a;return 1!==b[c]?(b[c]=1,n):m})},namespace:function(){var b,c,d,e=G(arguments),f=e.length,g=this;for(b=0;f>b;b++)for(d=(A+e[b]).split("."),c=a[d[0]]===g?1:0;c<d.length;++c)g=g[d[c]]=g[d[c]]||{};return g},startsWith:function(a,b){return 0===a.lastIndexOf(b,0)},endsWith:function(a,b){var c=a.length-b.length;return c>=0&&a.indexOf(b,c)==c},throttle:function(a,b,c){if(c=c||this,b=b||150,-1===b)return function(){a.apply(c,arguments)};var d=Date.now();return function(){var e=Date.now();e-d>b&&(d=e,a.apply(c,arguments))}},debounce:function(a,c,d){if(d=d||this,c=c||150,-1===c)return function(){a.apply(d,arguments)};var e=null,f=function(){f.stop(),e=b.later(a,c,0,d,arguments)};return f.stop=function(){e&&(e.cancel(),e=0)},f},substitute:function(a,d,e){return b.isNotEmptyString(a)?F(d)||w(d)?a.replace(e||/\\?\{\{\s*([^{}\s]+)\s*\}\}/g,function(a,b){return"\\"===a.charAt(0)?a.slice(1):d[b]===c?"":d[b]}):a:a},param:function(a,b,d,f){b=b||"&",d=d||"=",f===c&&(f=n);var g,h,i,j,k,l=[],m=encodeURIComponent;for(g in a)if(k=a[g],g=m(g),e(k))l.push(g),k!==c&&l.push(d,m(k+A)),l.push(b);else if(w(k)&&k.length)for(h=0,j=k.length;j>h;++h)i=k[h],e(i)&&(l.push(g,f?m("[]"):A),i!==c&&l.push(d,m(i+A)),l.push(b));return l.pop(),l.join(A)},unparam:function(a,d,e){if(!b.isNotEmptyString(a))return{};d=d||"&",e=e||"=";for(var f,g,h,i={},j=decodeURIComponent,k=a.split(d),l=0,m=k.length;m>l;++l){if(f=k[l].indexOf(e),-1==f)g=j(k[l]),h=c;else{g=j(k[l].substring(0,f)),h=k[l].substring(f+1);try{h=j(h)}catch(n){b.log(n+"decodeURIComponent error : "+h,"error","unparam")}}i[g]=h}return i},escapeHtml:M,unEscapeHtml:N})}(this,tbtx),function(a){var b=!1,c=a.each,d=a.param,e=a.unparam,f=function(a){return encodeURIComponent(String(a))},g=function(a){return decodeURIComponent(a.replace(/\+/g," "))},h=a.Query=function(a){this._query=a||"",this._queryMap=e(this._query)};h.prototype={get:function(b){var c=this._queryMap;return b?c[b]:a.deepCopy(c)},keys:function(){return a.keys(this._queryMap)},set:function(a,b){var d=this._queryMap;return"string"==typeof a?this._queryMap[a]=b:(a instanceof h&&(a=a.get()),c(a,function(a,b){d[b]=a})),this},remove:function(a){return a?delete this._queryMap[a]:this._queryMap={},this},add:function(a,b){var c,d=this._queryMap;if("string"==typeof a)c=d[a],c=void 0===c?b:[].concat(c).concat(b),d[a]=c;else{a instanceof h&&(a=a.get());for(var e in a)this.add(e,a[e])}return this},toString:function(a){return d(this._queryMap,void 0,void 0,a)}};var i=new RegExp("^(?:([^:/?#]+):)?(?://(?:([^/?#]*)@)?([^/?#:@]*)(?::([0-9]+))?)?([^?#]+)?(?:\\?([^#]*))?(?:#(.*))?$"),j={scheme:1,credentials:2,domain:3,port:4,path:5,query:6,fragment:7},k=a.Uri=function(b){var d,e=this;return a.mix(e,{scheme:"",credentials:"",domain:"",port:"",path:"",query:"",fragment:""}),d=k.getComponents(b),c(d,function(b,c){if("query"===c)e.query=new h(b);else{try{b=g(b)}catch(d){a.log(d+"urlDecode error : "+b,"error","Uri")}e[c]=b}}),e};k.prototype={getFragment:function(){return this.fragment},toString:function(a){var b=[],c=this,d=c.scheme,e=c.domain,f=c.path,g=c.port,h=c.fragment,i=c.query.toString(a),j=c.credentials;return d&&(b.push(d),b.push(":")),e&&(b.push("//"),j&&(b.push(j),b.push("@")),b.push(encodeURIComponent(e)),g&&(b.push(":"),b.push(g))),f&&b.push(f),i&&(b.push("?"),b.push(i)),h&&(b.push("#"),b.push(h)),b.join("")}},k.getComponents=function(b){b=b||location.href;var d,e={};return a.isNotEmptyString(b)?(d=b.match(i)||[],c(j,function(a,b){e[b]=d[a]||""}),e):e},a.mix({urlEncode:f,urlDecode:g,isUri:function(c){var d;return a.isNotEmptyString(c)?(d=i.exec(c),d&&d[1]):b},parseUrl:k.getComponents,getFragment:function(a){return new k(a).getFragment()},getQueryParam:function(b,c){a.isUri(b)&&(c=b,b="");var d=new k(c);return d.query.get(b)||""},addQueryParam:function(b,c,d){var e={};a.isPlainObject(b)?(d=c,e=b):e[b]=c;var f=new k(d);return f.query.add(e),f.toString()},removeQueryParam:function(b,c){b=a.makeArray(b);var d=new k(c);return b.forEach(function(a){d.query.remove(a)}),d.toString()}})}(tbtx),function(a,b,c){function d(){return A++}function e(a){return a.match(B)[0]}function f(a){for(a=a.replace(C,"/");a.match(D);)a=a.replace(D,"/");return a=a.replace(E,"$1/")}function g(a){var b=a.length-1,c=a.charAt(b);return"#"===c?a.substring(0,b):".js"===a.substring(b-2)||a.indexOf("?")>0||".css"===a.substring(b-3)||"/"===c?a:a+".js"}function h(a){var b=u.alias;return b&&w(b[a])?b[a]:a}function i(a){var b,c=u.paths;return c&&(b=a.match(F))&&w(c[b[1]])&&(a=c[b[1]]+b[2]),a}function j(a){var b=u.vars;return b&&a.indexOf("{")>-1&&(a=a.replace(G,function(a,c){return w(b[c])?b[c]:a})),a}function k(a){var b=u.map,c=a;if(b)for(var d=0,e=b.length;e>d;d++){var f=b[d];if(c=z(f)?f(a)||a:a.replace(f[0],f[1]),c!==a)break}return c}function l(a,b){var c,d=a.charAt(0);if(H.test(a))c=a;else if("."===d)c=f((b?e(b):u.cwd)+a);else if("/"===d){var g=u.cwd.match(I);c=g?g[0]+a.substring(1):a}else c=u.base+a;return 0===c.indexOf("//")&&(c=location.protocol+c),c}function m(a,b){if(!a)return"";a=h(a),a=i(a),a=j(a),a=g(a);var c=l(a,b);return c=k(c)}function n(a){return a.hasAttribute?a.src:a.getAttribute("src",4)}function o(a,b,c){b=b||y;var d=T.test(a),e=J.createElement(d?"link":"script");if(c){var f=z(c)?c(a):c;f&&(e.charset=f)}p(e,b,d),d?(e.rel="stylesheet",e.href=a):(e.async=!0,e.src=a),O=e,S?R.insertBefore(e,S):R.appendChild(e),O=null}function p(a,c,d){var e="onload"in a;if(d&&(U||!e))return setTimeout(function(){q(a,c)},1),void 0;var f=function(){a.onload=a.onerror=a.onreadystatechange=null,d||R.removeChild(a),a=null,c()};e?(a.onload=f,a.onerror=function(a){b.log(a,"error"),f()}):a.onreadystatechange=function(){/loaded|complete/.test(a.readyState)&&f()}}function q(a,b){var c,d=a.sheet;if(U)d&&(c=!0);else if(d)try{d.cssRules&&(c=!0)}catch(e){"NS_ERROR_DOM_SECURITY_ERR"===e.name&&(c=!0)}setTimeout(function(){c?b():q(a,b)},20)}function r(){if(J.currentScript)return J.currentScript;if(O)return O;if(P&&"interactive"===P.readyState)return P;for(var a=R.getElementsByTagName("script"),b=a.length-1;b>=0;b--){var c=a[b];if("interactive"===c.readyState)return P=c}}function s(a,b){this.uri=a,this.dependencies=b||[],this.exports=null,this.status=0,this._waitings={},this._remain=0}var t=b.namespace("Loader"),u=t.data={},v=b.isObject,w=b.isString,x=Array.isArray,y=b.noop,z=b.isFunction,A=0,B=/[^?#]*\//,C=/\/\.\//g,D=/\/[^/]+\/\.\.\//,E=/([^:/])\/\//g,F=/^([^/:]+)(\/.+)$/,G=/{([^{]+)}/g,H=/^\/\/.|:\//,I=/^.*?\/\/.*?\//,J=document,K=e(location.href),L=J.scripts,M=L[L.length-1],N=e(n(M)||K);t.resolve=m;var O,P,Q,R=J.head||J.getElementsByTagName("head")[0]||J.documentElement,S=R.getElementsByTagName("base")[0],T=/\.css(?:\?|$)/i,U=+navigator.userAgent.replace(/.*(?:AppleWebKit|AndroidWebKit)\/(\d+).*/,"$1")<536,V=t.cache={},W={},X={},Y={},Z=s.STATUS={FETCHING:1,SAVED:2,LOADING:3,LOADED:4,EXECUTING:5,EXECUTED:6};s.prototype={resolve:function(){for(var a=this,b=a.dependencies,c=[],d=0,e=b.length;e>d;d++)c[d]=s.resolve(b[d],a.uri);return c},load:function(){var a=this;if(!(a.status>=Z.LOADING)){a.status=Z.LOADING;for(var b,c=a.resolve(),d=a._remain=c.length,e=0;d>e;e++)b=s.get(c[e]),b.status<Z.EXECUTED?b._waitings[a.uri]=(b._waitings[a.uri]||0)+1:a._remain--;if(0===a._remain)return a.onload(),void 0;for(e=0;d>e;e++)b=V[c[e]],b.status<Z.FETCHING?b.fetch():b.status===Z.SAVED&&b.load()}},onload:function(){var a=this;a.status=Z.LOADED,a.callback&&a.callback(),a.exec();var b,c,d=a._waitings;for(b in d)d.hasOwnProperty(b)&&(c=V[b],c._remain-=d[b],0===c._remain&&c.onload());delete a._waitings,delete a._remain},exec:function(){var a=this;if(a.status>=Z.EXECUTING)return a.exports;a.status=Z.EXECUTING,a.uri;for(var b=a.resolve(),d=[],e=0,f=b.length;f>e;e++)d[e]=s.get(b[e]).exports;var g=a.factory,h=z(g)?g.apply(null,d):g;return h===c&&(h=a.exports),delete a.factory,a.exports=h,a.status=Z.EXECUTED,h},fetch:function(){function a(){o(d,b,u.charset)}function b(){delete W[d],X[d]=!0,Q&&(s.save(d,Q),Q=null);var a,b=Y[d];for(delete Y[d];a=b.shift();)a.load()}var c=this,d=c.uri;return c.status=Z.FETCHING,!d||X[d]?(c.load(),void 0):W[d]?(Y[d].push(c),void 0):(W[d]=!0,Y[d]=[c],a(),void 0)}},s.save=function(a,b){var c=s.get(a);c.status<Z.SAVED&&(c.id=b.id||a,c.dependencies=b.deps||[],c.factory=b.factory,c.status=Z.SAVED)},s.get=function(a,b){return V[a]||(V[a]=new s(a,b))},s.require=function(b,c,d){var e=s.get(d,x(b)?b:[b]);e.callback=function(){for(var b=[],d=e.resolve(),f=0,g=d.length;g>f;f++)b[f]=V[d[f]].exports;c&&c.apply(a,b),delete e.callback},e.load()},s.resolve=function(a,b){return m(a,b)},s.register=function(a,b){var c=s.resolve(a),d=s.get(c);d.id=a||c,b&&(d.exports=b),d.status=Z.EXECUTED},s.define=function(a,b,d){var e=arguments.length;1===e?(d=a,a=c):2===e&&(d=b,x(a)?(b=a,a=c):b=c),x(b)||(b=[]);var f={id:a,uri:s.resolve(a),deps:b,factory:d};if(!f.uri){var g=r();g&&(f.uri=g.src)}f.uri?s.save(f.uri,f):Q=f},s.define.amd={},u.base=N,u.dir=N,u.cwd=K,u.charset="utf-8",t.config=function(a){for(var b in a){var c=a[b],d=u[b];if(d&&v(d))for(var e in c)d[e]=c[e];else x(d)?c=d.concat(c):"base"===b&&("/"!==c.slice(-1)&&(c+="/"),c=l(c)),u[b]=c}},a.define=b.define=s.define,b.require=function(a,c){return s.require(a,c,u.cwd+"_require_"+d()),b},b.register=s.register,b.realpath=f,b.request=o}(this,tbtx),function(a){var b=a.realpath,c=a.global,d=a.Loader,e=d.data,f=e.dir,g=a.staticUrl=b(f+"../../../"),h={};["dist","plugin","gallery","component"].forEach(function(a){h[a]=f+a}),h.arale=f+"dist/arale",d.config({base:g,alias:{base:"arale/base/1.1.1/base",widget:"arale/widget/1.1.1/widget",position:"arale/position/1.0.1/position",detector:"arale/detector/1.3.0/detector",overlay:"component/overlay/1.1.4/overlay",popup:"component/popup/1.0.0/popup",switchable:"component/switchable/1.0.3/switchable",validator:"component/validator/0.9.7/validator",$:"gallery/jquery/1.8.3/jquery.min",jquery:"gallery/jquery/1.8.3/jquery.min",handlebars:"gallery/handlebars/1.3.0/handlebars",json:"gallery/json2/json2",easing:"plugin/jquery.easing.1.3"},paths:h}),a.define.amd.jQuery=!0,c.JSON&&a.register("json"),c.jQuery&&(a.register("jquery",jQuery),a.register("$",jQuery))}(tbtx),function(a){var b=a.isNotEmptyString,c=document,d=864e5,e=encodeURIComponent,f=decodeURIComponent,g={get:function(a){var d,e;return b(a)&&(e=String(c.cookie).match(new RegExp("(?:^| )"+a+"(?:(?:=([^;]*))|;|$)")))&&(d=e[1]?f(e[1]):""),d},set:function(a,f,g,h,i,j){var k=String(e(f)),l=h;return"number"==typeof l&&(l=new Date,l.setTime(l.getTime()+h*d)),l instanceof Date&&(k+="; expires="+l.toUTCString()),b(g)&&(k+="; domain="+g),b(i)&&(k+="; path="+i),j&&(k+="; secure"),c.cookie=a+"="+k,this},remove:function(a,b,c,d){return this.set(a,"",b,-1,c,d),this}};a.cookie=g}(tbtx),define("request",["jquery"],function(a){var b=tbtx,c=b.cookie,d=function(){var a=Math.random().toString().substr(2)+(new Date).getTime().toString().substr(1)+Math.random().toString().substr(2);return c.set(b.tokenName,a,"","","/"),a};b.tokenName="MIIEE_JTOKEN";var e=-1,f={code:e,msg:"请求失败！请检查网络连接！"},g=-2,h={},i=function(c,j,k){k=k||i.successCode||[100],j=j||{},b.isPlainObject(j)&&!j.jtoken&&(j.jtoken=d());var l=h[c];return l&&"pending"===l.state()?(l.notify(g),l.promise()):(l=h[c]=a.Deferred(),a.ajax({url:c,type:"post",dataType:"json",data:j,timeout:1e4}).done(function(a){var c=a&&a.code;b.inArray(k,c)?l.resolve(a):l.reject(c,a)}).fail(function(){l.reject(e,f)}),l.promise())};return b.Request=i,i});