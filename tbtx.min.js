!function(a,b,c){var d=a.console&&console.log,e=function(){};b=a[b]={version:"2.0",log:d?function(a,c){return b.config("debug")&&(c&&(a=c+": "+a),console.log(a)),b}:e,error:function(a){throw a instanceof Error?a:new Error(a)},global:a,noop:e,Config:{debug:-1!==location.search.indexOf("debug")?!0:!1,fns:{}},config:function(a,d){var e,f=b,g=f.Config,h=g.fns,i=f;return"string"==typeof a?(e=h[a],d===c?i=e?e.call(f):g[a]:e?i=e.call(f,d):g[a]=d):b.each(a,function(a,b){e=h[b],e?e.call(f,a):g[b]=a}),i}}}(this,"tbtx"),function(a,b){var c=a.global,d=Array.prototype,e=String.prototype,f=Function.prototype,g={},h=g.toString,i=g.hasOwnProperty,j=d.slice,k=function(a,b){return i.call(a,b)},l=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,m=/[^, ]+/g,n=/\\?\{\{\s*([^{}\s]+)\s*\}\}/gm,o=/<[^>]+>/gim,p=/<script[^>]*>([\S\s]*?)<\/script\s*>/gim,q=function(a,b,c){var d=0,e=a.length;if(c&&(b=b.bind(c)),e===+e)for(;e>d&&b(a[d],d,a)!==!1;d++);else for(d in a)if(k(a,d)&&b(a[d],d,a)===!1)break};Object.keys||(Object.keys=function(a){var b,c=[];for(b in a)k(a,b)&&c.push(b);return c}),f.bind||(f.bind=function(a){var b=j.call(arguments,1),d=this,e=function(){},f=function(){return d.apply(this instanceof e&&a?this:a||c,b.concat(j.call(arguments)))};return e.prototype=this.prototype,f.prototype=new e,f}),Date.now||(Date.now=function(){return+new Date}),e.trim||(e.trim=function(){return this.replace(l,"")}),d.forEach||(d.forEach=function(a,b){for(var c=0,d=this.length;d>c;c++)a.call(b,this[c],c,this)}),d.map||(d.map=function(a,b){for(var c=[],d=0,e=this.length;e>d;d++)c.push(a.call(b,this[d],d,this));return c}),d.filter||(d.filter=function(a,b){for(var c,d=[],e=0,f=this.length;f>e;e++)c=this[e],a.call(b,c,e,this)&&d.push(c);return d}),d.some||(d.some=function(a,b){for(var c=0,d=this.length;d>c;c++)if(a.call(b,this[c],c,this))return!0;return!1}),d.every||(d.every=function(a,b){for(var c=0,d=this.length;d>c;c++)if(!a.call(b,this[c],c,this))return!1;return!0}),d.indexOf||(d.indexOf=function(a,b){var c,d=-1,e=this.length;for(c=1*b||0,c=c>=0?c:Math.max(0,e+c);e>c;c++)if(this[c]===a)return c;return d}),d.lastIndexOf||(d.lastIndexOf=function(a,b){var c=-1,d=this.length,e=d-1;for(b=1*b||d-1,e=Math.min(e,b);e>-1;e--)if(this[e]===a)return e;return c}),d.reduce||(d.reduce=function(a,c){var d=c,e=0,f=this.length;for(c===b&&(d=this[0],e=1);f>e;e++)d=a(d,this[e],e,this);return d}),d.reduceRight||(d.reduceRight=function(a,c){var d=this.length,e=d-1,f=c;for(c===b&&(f=this[d-1],e--);e>-1;e--)f=a(f,this[e],e,this);return f}),"map filter forEach some every reduce reduceRight indexOf lastIndexOf".replace(m,function(b){a[b]=function(a,c,e){a.length===+a.length&&(a=A(a));var f=j.call(arguments,1),g=a[b];if(g===d[b])return g.apply(a,f);var h=Object.keys(a),i={};switch(b){case"filter":q(h,function(b){var d=a[b],f=c.call(e,d,b,a);f&&(i[b]=d)});break;case"map":q(h,function(b,d){d=a[b],i[b]=c.call(e,d,b,a)});break;default:return h[b](function(b,d){return d=a[b],c.call(e,d,b,a)})}return i}}),"Boolean Number String Function Array Date RegExp Object".replace(m,function(b,c){g["[object "+b+"]"]=c=b.toLowerCase(),a["is"+b]=function(a){return x(a)===c}});var r=Array.isArray=a.isArray=Array.isArray||a.isArray,s=a.isFunction,t=a.isObject,u=a.isString,v=function(a,b){var c={};return b=b||function(a){return(a+"").trim()},function(){var d=arguments,e=b.apply(this,d),f=c[e];return f?f:c[e]=a.apply(this,d)}},w=function(a,b){return b&&(a=a.bind(b)),v(a,function(){return 1})},x=function(a){if(null==a)return a+"";var b=typeof a;return"object"===b||"function"===b?g[h.call(a)]||"object":b},y=function(a){return null!=a&&a==a.window},z=function(a){if(!t(a)||a.nodeType||y(a))return!1;var c,d;try{if((d=a.constructor)&&!k(a,"constructor")&&!k(d.prototype,"isPrototypeOf"))return!1}catch(e){return!1}for(c in a);return c===b||k(a,c)},A=function(a){if(null==a)return[];if(r(a))return a;var b=[],c=0,d=a.length,e=x(d),f=x(a);if("number"!==e||"string"==typeof a.nodeName||y(a)||"string"===f||"function"===f&&!("item"in a&&"number"===e))return[a];for(;d>c;c++)b[c]=a[c];return b},B=function(){var a,c,d,e,f,g,h=arguments[0]||{},i=1,j=arguments.length,k=!1;for("boolean"==typeof h&&(k=h,h=arguments[i]||{},i++),"object"==typeof h||s(h)||(h={}),i===j&&(h=this,i--);j>i;i++)if(null!=(f=arguments[i]))for(e in f)a=h[e],d=f[e],h!==d&&(k&&d&&(z(d)||(c=r(d)))?(c?(c=!1,g=a&&r(a)?a:[]):g=a&&z(a)?a:{},h[e]=B(k,g,d)):d!==b&&(h[e]=d));return h},C=function(a){a=a||0;var b=0;return function(){return a+b++}},D={"&amp;":"&","&gt;":">","&lt;":"<","&#x60;":"`","&#x2F;":"/","&quot;":'"',"&#x27;":"'"},E={},F=w(function(){var a="";return q(D,function(b){a+=b+"|"}),a=a.slice(0,-1),new RegExp(a,"g")}),G=w(function(){var a="";return q(E,function(b){a+=b+"|"}),a+="&#(\\d{1,5});",new RegExp(a,"g")}),H=function(a){return(a+"").replace(F(),function(a){return E[a]})},I=function(a){return(a+"").replace(G(),function(a){return D[a]})};q(D,function(a,b){E[a]=b}),a.Now=a.now=Date.now,B(a,{keys:Object.keys,bind:function(a,b){return a.bind(b)},trim:function(a){return a.trim()},each:q,mix:B,extend:B,rword:m,isWindow:y,isPlainObject:z,type:x,makeArray:A,memoize:v,singleton:w,cidGenerator:C,uniqueCid:C(),nextTick:function(a){setTimeout(a,0)},isNotEmptyString:function(a){return u(a)&&""!==a},inArray:function(a,b){return a.indexOf(b)>-1},erase:function(a,b){var c=b.indexOf(a);return c>-1&&b.splice(c,1),b},unique:function(a){var b={};return a.filter(function(a){var c=x(a)+a;return 1!==b[c]?(b[c]=1,!0):!1})},namespace:function(a){var b,d,e,f=this;for(d=(a+"").split("."),b=c[d[0]]===f?1:0,e=d.length;e>b;b++)f=f[d[b]]=f[d[b]]||{};return f},ucfirst:function(a){return a.charAt(0).toUpperCase()+a.substring(1)},startsWith:function(a,b){return 0===a.lastIndexOf(b,0)},endsWith:function(a,b){var c=a.length-b.length;return c>=0&&a.indexOf(b,c)===c},random:function(a,b){var c,d;return r(a)&&(c=a,a=0,b=c.length-1),null==b&&(b=a,a=0),d=a+Math.floor(Math.random()*(b-a+1)),c?c[d]:d},later:function(b,c,d,e,f){c=c||0;var g,h,i=b,j=A(f);return u(b)&&(i=e[b]),i||a.error("later: method undefined"),g=function(){i.apply(e,j)},h=d?setInterval(g,c):setTimeout(g,c),{id:h,interval:d,cancel:function(){this.interval?clearInterval(h):clearTimeout(h)}}},throttle:function(a,b,c){if(c=c||this,b=b||150,-1===b)return a.bind(c);var d=Date.now();return function(){var e=Date.now();e-d>b&&(d=e,a.apply(c,arguments))}},debounce:function(b,c,d){if(d=d||this,c=c||150,-1===c)return b.bind(d);var e=null,f=function(){f.stop(),e=a.later(b,c,0,d,arguments)};return f.stop=function(){e&&(e.cancel(),e=0)},f},substitute:function(a,c,d){return u(a)||r(c)||z(c)?a.replace(n,function(a,e){return"\\"===a.charAt(0)?a.slice(1):c[e]===b?d?a:"":c[e]}):a},stripTags:function(a){return(a+"").replace(o,"")},stripScripts:function(a,b){var c,d;return b&&(b=A(b),c="("+b.join("|")+")",d=new RegExp(["<",c,"[^>]*([\\S\\s]*?)<\\/",c,"\\s*>"].join(""),"img")),(a+"").replace(d||p,"")},truncate:function(a,b,c){return a+="",c=c||"...",a.length>b?a.slice(0,b-c.length)+c:a},escapeHtml:H,unEscapeHtml:I})}(tbtx),function(a,b){function c(a){var b=typeof a;return null===a||"object"!==b&&"function"!==b}var d=a.each,e=a.isString,f=a.makeArray,g=a.memoize,h=a.log,i=function(a){return encodeURIComponent(a+"")},j=function(a){return decodeURIComponent(a.replace(/\+/g," "))},k=function(a,e,f){e=e||"&",f=f||"=";var g=[];return d(a,function(a,d){d=i(d),c(a)&&(g.push(d),a!==b&&g.push(f,i(a)),g.push(e))}),g.pop(),g.join("")},l=g(function(a,c,d){if(a=(a+"").trim(),!a)return{};c=c||"&",d=d||"=";for(var e,f,g,i={},k=a.split(c),l=0,m=k.length;m>l;++l){if(e=k[l].indexOf(d),-1==e)f=j(k[l]),g=b;else{f=j(k[l].substring(0,e)),g=k[l].substring(e+1);try{g=j(g)}catch(n){h(n,"unparam")}}i[f]=g}return i}),m=a.Query=function(a){this._query=a,this._map=l(this._query)},n=m.prototype={get:function(a){var b=this._map;return a?b[a]:b},set:function(a,b){var c=this,f=c._map;return e(a)?f[a]=b:(a instanceof m&&(a=a.get()),d(a,function(a,b){f[b]=a})),c},remove:function(a){var b=this;return a?(a=f(a),a.forEach(function(a){delete b._map[a]})):b._map={},b},toString:function(){return k(this._map)}},o=new RegExp(["^","(?:","([^:/?#]+)",":)?","(?://","(?:([^/?#]*)@)?","([^/?#:@]*)","(?::([0-9]+))?",")?","([^?#]+)?","(?:\\?([^#]*))?","(?:#(.*))?","$"].join("")),p={scheme:1,credentials:2,domain:3,port:4,path:5,query:6,fragment:7},q=a.Uri=function(a){var b=this,c=q.getComponents(a);return d(c,function(a,c){if("query"===c)b.query=new m(a);else{try{a=j(a)}catch(d){h(d,"Uri")}b[c]=a}}),b},r=g(function(a){a+="";var b,c=a.charAt(0);return"/"===c||"."===c?!0:(b=o.exec(a),b?!!(b[1]&&b[3]||b[1]&&b[5]):!1)});n.add=n.set,q.prototype={getFragment:function(){return this.fragment},toString:function(){var a=[],b=this,c=b.scheme,d=b.domain,e=b.path,f=b.port,g=b.fragment,h=b.query.toString(),j=b.credentials;return c&&(a.push(c),a.push(":")),d&&(a.push("//"),j&&(a.push(j),a.push("@")),a.push(i(d)),f&&(a.push(":"),a.push(f))),e&&a.push(e),h&&(a.push("?"),a.push(h)),g&&(a.push("#"),a.push(g)),a.join("")}},q.getComponents=g(function(a){a=a||location.href;var b=a.match(o)||[],c={};return d(p,function(a,d){c[d]=b[a]||""}),c}),"add get remove set".replace(a.rword,function(b){a[b+"QueryParam"]=function(){var a,c=f(arguments),d=c.length;r(c[0])?a=c.shift():r(c[d-1])&&(a=c.pop());var e=new q(a),g=e.query,h=g[b].apply(g,c);return h===g?e.toString():h||""}}),a.mix({urlEncode:i,urlDecode:j,param:k,unparam:l,isUri:r,parseUri:q.getComponents,getFragment:function(a){return new q(a).getFragment()}}),a.parseUrl=a.parseUri}(tbtx),function(a,b){var c=a.ucfirst,d=navigator.userAgent,e=b.documentElement,f=b.createElement("tbtx"),g=f.style,h=" ",i="Webkit Moz O ms",j=i.split(h),k=function(a){return m(a,"pfx")},l=function(a,b){var c,d;for(d in a)if(c=a[d],void 0!==g[c])return"pfx"==b?c:!0;return!1},m=function(a,b){var d=c(a),e=(a+h+j.join(d+h)+d).split(h);return l(e,b)},n="ontouchstart"in e,o=!!d.match(/AppleWebKit.*Mobile.*/)||n,p=!!d.match(/iPad/i),q=o&&!p;a.mix({support:{transition:m("transition"),transform:m("transform"),touch:n,mobile:o,pad:p,phone:q,placeholder:"placeholder"in b.createElement("input")},testPropsAll:m,prefixed:k})}(tbtx,document),function(a,b){function c(a){return a.match(D)[0]}function d(a){for(a=a.replace(E,"/"),a=a.replace(G,"$1/");a.match(F);)a=a.replace(F,"/");return a}function e(a){var b=a.length-1,c=a.charAt(b);return"#"===c?a.substring(0,b):".js"===a.substring(b-2)||a.indexOf("?")>0||".css"===a.substring(b-3)||"/"===c?a:a+".js"}function f(a){var b=B.alias;return b&&v(b[a])?b[a]:a}function g(a){var b,c=B.paths;return c&&(b=a.match(H))&&v(c[b[1]])&&(a=c[b[1]]+b[2]),a}function h(a){var b=B.vars;return b&&a.indexOf("{")>-1&&(a=a.replace(I,function(a,c){return v(b[c])?b[c]:a})),a}function i(a){var b=B.map,c=a;if(b)for(var d=0,e=b.length;e>d;d++){var f=b[d];if(c=x(f)?f(a)||a:a.replace(f[0],f[1]),c!==a)break}return c}function j(a,b){var e,f=a.charAt(0);if(J.test(a))e=a;else if("."===f)e=(b?c(b):B.cwd)+a;else if("/"===f){var g=B.cwd.match(K);e=g?g[0]+a.substring(1):a}else e=B.base+a;return 0===e.indexOf("//")&&(e=location.protocol+e),d(e)}function k(a,b){if(!a)return"";a=f(a),a=g(a),a=h(a),a=e(a);var c=j(a,b);return c=i(c)}function l(a){return a.hasAttribute?a.src:a.getAttribute("src",4)}function m(a,b,c){b=b||z;var d=S.test(a),e=L.createElement(d?"link":"script");if(c){var f=x(c)?c(a):c;f&&(e.charset=f)}n(e,b,d),d?(e.rel="stylesheet",e.href=a):(e.async=!0,e.src=a),r=e,R?Q.insertBefore(e,R):Q.appendChild(e),r=null}function n(b,c,d){var e="onload"in b;if(d&&(T||!e))return void setTimeout(function(){o(b,c)},1);var f=function(){b.onload=b.onerror=b.onreadystatechange=null,d||Q.removeChild(b),b=null,c()};e?(b.onload=f,b.onerror=function(b){a.log(b,"error","css"),f()}):b.onreadystatechange=function(){/loaded|complete/.test(b.readyState)&&f()}}function o(a,b){var c,d=a.sheet;if(T)d&&(c=!0);else if(d)try{d.cssRules&&(c=!0)}catch(e){"NS_ERROR_DOM_SECURITY_ERR"===e.name&&(c=!0)}setTimeout(function(){c?b():o(a,b)},20)}function p(){if(L.currentScript)return L.currentScript;if(r)return r;if(s&&"interactive"===s.readyState)return s;for(var a,b=Q.getElementsByTagName("script"),c=b.length-1;c>=0;c--)if(a=b[c],"interactive"===a.readyState)return s=a}function q(a,b){this.uri=a,this.dependencies=b||[],this.exports=null,this.status=0,this._waitings={},this._remain=0}var r,s,t,u=a.isObject,v=a.isString,w=a.isArray,x=a.isFunction,y=a.global,z=a.noop,A=a.Loader={},B=A.data={},C=a.cidGenerator(),D=/[^?#]*\//,E=/\/\.\//g,F=/\/[^/]+\/\.\.\//,G=/([^:/])\/\//g,H=/^([^/:]+)(\/.+)$/,I=/{([^{]+)}/g,J=/^\/\/.|:\//,K=/^.*?\/\/.*?\//,L=document,M=c(location.href),N=L.scripts,O=N[N.length-1],P=c(l(O)||M),Q=L.head||L.getElementsByTagName("head")[0]||L.documentElement,R=Q.getElementsByTagName("base")[0],S=/\.css(?:\?|$)/i,T=+navigator.userAgent.replace(/.*(?:AppleWebKit|AndroidWebKit)\/(\d+).*/,"$1")<536,U=A.cache={},V={},W={},X={},Y=q.STATUS={FETCHING:1,SAVED:2,LOADING:3,LOADED:4,EXECUTING:5,EXECUTED:6};q.prototype={resolve:function(){var b=this,c=b.uri,d=b.dependencies;return a.map(d,function(a){return q.resolve(a,c)})},load:function(){var a=this;if(!(a.status>=Y.LOADING)){a.status=Y.LOADING;for(var b,c=a.resolve(),d=a._remain=c.length,e=0;d>e;e++)b=q.get(c[e]),b.status<Y.EXECUTED?b._waitings[a.uri]=(b._waitings[a.uri]||0)+1:a._remain--;if(0===a._remain)return void a.onload();for(e=0;d>e;e++)b=U[c[e]],b.status<Y.FETCHING?b.fetch():b.status===Y.SAVED&&b.load()}},onload:function(){var a=this;a.status=Y.LOADED,a.callback&&a.callback(),a.exec();var b,c,d=a._waitings;for(b in d)d.hasOwnProperty(b)&&(c=U[b],c._remain-=d[b],0===c._remain&&c.onload());delete a._waitings,delete a._remain},exec:function(){var a=this;if(a.status>=Y.EXECUTING)return a.exports;a.status=Y.EXECUTING;for(var c=(a.uri,a.resolve()),d=[],e=0,f=c.length;f>e;e++)d[e]=q.get(c[e]).exports;var g=a.factory,h=x(g)?g.apply(null,d):g;return h===b&&(h=a.exports),delete a.factory,a.exports=h,a.status=Y.EXECUTED,h},fetch:function(){function a(){m(d,b,B.charset)}function b(){delete V[d],W[d]=!0,t&&(q.save(d,t),t=null);var a,b=X[d];for(delete X[d];a=b.shift();)a.load()}var c=this,d=c.uri;return c.status=Y.FETCHING,!d||W[d]?void c.load():V[d]?void X[d].push(c):(V[d]=!0,X[d]=[c],void a())}},q.save=function(a,b){var c=q.get(a);c.status<Y.SAVED&&(c.id=b.id||a,c.dependencies=b.deps||[],c.factory=b.factory,c.status=Y.SAVED)},q.get=function(a,b){return U[a]||(U[a]=new q(a,b))},q.require=function(a,b,c){var d=q.get(c,w(a)?a:[a]);d.callback=function(){for(var a=[],c=d.resolve(),e=0,f=c.length;f>e;e++)a[e]=U[c[e]].exports;b&&b.apply(y,a),delete d.callback},d.load()},q.resolve=function(a,b){return k(a,b)},q.define=function(a,c,d){var e=arguments.length;1===e?(d=a,a=b):2===e&&(d=c,w(a)?(c=a,a=b):c=b),w(c)||(c=[]);var f={id:a,uri:q.resolve(a),deps:c,factory:d};if(!f.uri){var g=p();g&&(f.uri=g.src)}f.uri?q.save(f.uri,f):t=f},q.define.amd={},B.base=P,B.dir=P,B.cwd=M,B.charset="utf-8",A.config=function(a){for(var b in a){var c=a[b],d=B[b];if(d&&u(d))for(var e in c)d[e]=c[e];else w(d)?c=d.concat(c):"base"===b&&("/"!==c.slice(-1)&&(c+="/"),c=j(c)),B[b]=c}},A.resolve=k,y.define=a.define=q.define,y.require=a.require=function(b,c){return q.require(b,c,B.cwd+"_require_"+C()),a},a.mix({realpath:d,loadScript:m,loadCss:m})}(tbtx),function(a){var b=a.realpath,c=a.Config.fns,d=a.Loader,e=d.data,f=d.config,g=e.dir,h=a.staticUrl=b(g+"../../../"),i={},j={events:"arale/events/1.1.0/events",base:"arale/base/1.1.1/base",widget:"arale/widget/1.1.1/widget",position:"arale/position/1.0.1/position",router:"dist/router",overlay:"component/overlay/1.1.4/overlay",popup:"component/popup/1.0.0/popup",switchable:"component/switchable/1.0.3/switchable",validator:"component/validator/0.9.7/validator",jquery:a.support.phone?"gallery/jquery/2.1.1/jquery.min":"gallery/jquery/1.8.3/jquery.min",zepto:"gallery/zepto/1.1.2/zepto.min",handlebars:"gallery/handlebars/1.3.0/handlebars",json:"gallery/json2/json2",clipboard:"gallery/zeroclipboard/1.3.5/ZeroClipboard.min",lazyload:"plugin/jquery.lazyload",easing:"plugin/jquery.easing.1.3",kissy:"http://g.tbcdn.cn/kissy/k/1.4.0/seed-min.js"};["dist","plugin","gallery","component"].forEach(function(a){i[a]=g+a}),i.arale=g+"dist/arale",j.$=j.jquery,f({base:h,alias:j,paths:i}),a.config("debug")||f({map:[function(b){return a.inArray(["msg","position","request"],b.slice(h.length,b.length-3))?void 0:-1===b.indexOf("t=")?b.replace(/^(.*\.(?:css|js))(.*)$/i,"$1?t="+Math.floor(Date.now()/36e5)):void 0}]}),"alias map paths".replace(a.rword,function(a){c[a]=function(b){if(!b)return e[a];var c={};c[a]=b,f(c)}})}(tbtx),function(a){var b=a.isNotEmptyString,c=document,d=864e5,e=encodeURIComponent,f=decodeURIComponent,g={get:function(a){var d,e;return b(a)&&(e=String(c.cookie).match(new RegExp("(?:^| )"+a+"(?:(?:=([^;]*))|;|$)")))&&(d=e[1]?f(e[1]):""),d},set:function(a,f,g,h,i,j){var k=String(e(f)),l=h;return"number"==typeof l&&(l=new Date,l.setTime(l.getTime()+h*d)),l instanceof Date&&(k+="; expires="+l.toUTCString()),b(g)&&(k+="; domain="+g),b(i)&&(k+="; path="+i),j&&(k+="; secure"),c.cookie=a+"="+k,this},remove:function(a,b,c,d){return this.set(a,"",b,-1,c,d),this}};a.cookie=g}(tbtx),define("arale/events/1.1.0/events",[],function(){function a(){}function b(a,b,c,d){var e;if(a)for(var f=0,g=a.length;g>f;f+=2)e=a[f].apply(a[f+1]||c,b),e===!1&&d.status&&(d.status=!1)}var c=/\s+/;a.prototype.on=function(a,b,d){var e,f,g;if(!b)return this;for(e=this.__events||(this.__events={}),a=a.split(c);f=a.shift();)g=e[f]||(e[f]=[]),g.push(b,d);return this},a.prototype.off=function(a,b,e){var f,g,h,i;if(!(f=this.__events))return this;if(!(a||b||e))return delete this.__events,this;for(a=a?a.split(c):d(f);g=a.shift();)if(h=f[g])if(b||e)for(i=h.length-2;i>=0;i-=2)b&&h[i]!==b||e&&h[i+1]!==e||h.splice(i,2);else delete f[g];return this},a.prototype.trigger=function(a){var d,e,f,g,h,i,j=[],k={status:!0};if(!(d=this.__events))return this;for(a=a.split(c),h=1,i=arguments.length;i>h;h++)j[h-1]=arguments[h];for(;e=a.shift();)(f=d.all)&&(f=f.slice()),(g=d[e])&&(g=g.slice()),b(g,j,this,k),b(f,[e].concat(j),this,k);return k.status},a.mixTo=function(b){b=b.prototype||b;var c=a.prototype;for(var d in c)c.hasOwnProperty(d)&&(b[d]=c[d])};var d=Object.keys;return a}),define("arale/position/1.0.1/position",["jquery"],function(a){function b(b){b=g(b)||{},b.nodeType&&(b={element:b});var c=g(b.element)||j;if(1!==c.nodeType)throw new Error("posObject.element is invalid.");var d={element:c,x:b.x||0,y:b.y||0},e=c===j||"VIEWPORT"===c._id;return d.offset=function(){return k?{left:0,top:0}:e?{left:a(document).scrollLeft(),top:a(document).scrollTop()}:h(a(c)[0])},d.size=function(){var b=a(e?window:c);return{width:b.outerWidth(),height:b.outerHeight()}},d}function c(a){a.x=d(a.x,a,"width"),a.y=d(a.y,a,"height")}function d(a,b,c){if(a+="",a=a.replace(/px/gi,""),/\D/.test(a)&&(a=a.replace(/(?:top|left)/gi,"0%").replace(/center/gi,"50%").replace(/(?:bottom|right)/gi,"100%")),-1!==a.indexOf("%")&&(a=a.replace(/(\d+(?:\.\d+)?)%/gi,function(a,d){return b.size()[c]*(d/100)})),/[+\-*\/]/.test(a))try{a=new Function("return "+a)()}catch(d){throw new Error("Invalid position value: "+a)}return f(a)}function e(b){var c=b.offsetParent();c[0]===document.documentElement&&(c=a(document.body)),m&&c.css("zoom",1);var d;return d=c[0]===document.body&&"static"===c.css("position")?{top:0,left:0}:h(c[0]),d.top+=f(c.css("border-top-width")),d.left+=f(c.css("border-left-width")),d}function f(a){return parseFloat(a,10)||0}function g(b){return a(b)[0]}function h(a){var b=a.getBoundingClientRect(),c=document.documentElement;return{left:b.left+(window.pageXOffset||c.scrollLeft)-(c.clientLeft||document.body.clientLeft||0),top:b.top+(window.pageYOffset||c.scrollTop)-(c.clientTop||document.body.clientTop||0)}}var i={},j={_id:"VIEWPORT",nodeType:1},k=!1,l=(window.navigator.userAgent||"").toLowerCase(),m=-1!==l.indexOf("msie 6");return i.pin=function(d,f){d=b(d),f=b(f);var g=a(d.element);"fixed"!==g.css("position")||m?(g.css("position","absolute"),k=!1):k=!0,c(d),c(f);var h=e(g),i=f.offset(),j=i.top+f.y-d.y-h.top,l=i.left+f.x-d.x-h.left;g.css({left:l,top:j})},i.center=function(a,b){i.pin({element:a,x:"50%",y:"50%"},{element:b,x:"50%",y:"50%"})},i.VIEWPORT=j,i}),function(a){function b(a,b){return k.test(i(a))&&(b=[a,a=b][0]),a=a||"Y-m-d h:i:s",b=c(b),a.replace(j,function(a){return b[a]})}function c(a){a=e(a);var b={Y:a.getFullYear(),M:a.getMonth()+1,D:a.getDate(),H:a.getHours(),I:a.getMinutes(),S:a.getSeconds()},c={origin:a};return h(b,function(a,b){a+="",c[b]=a,b=b.toLowerCase(),c[b]=f(a).slice(-2)}),c}function d(b,c){b=e(b),c=e(c);var d=Math.abs(b-c)/1e3,f=d,g={};return"day hour minute second".replace(a.rword,function(a){var b=m[a],c=Math.floor(f/b);g[a]=c,f-=b*c}),g}function e(a){return g(a)?new Date(+a):l.test(typeof a)?new Date(a):new Date}function f(a){return a+="",1===a.length?"0"+a:a}var g=a.isDate,h=a.each,i=a.type,j=/y|m|d|h|i|s/gi,k=/^(?:number|date)$/,l=/^(?:number|string)$/,m={second:1,minute:60,hour:3600,day:86400};a.mix({normalizeDate:c,diffDate:d,makeDate:e,formatDate:b})}(tbtx),define("request",["jquery","json"],function(a){function b(a,b){return JSON.stringify(a)==JSON.stringify(b)}var c=tbtx,d=c.cookie,e=c.isPlainObject,f=c.config,g="tokenName",h=function(){return String(Math.random()).slice(2)},i=h()+h()+h(),j=function(){return d.set(f(g),i,"","","/"),i};f(g)||f(g,"MIIEE_JTOKEN"),f({requestFailCode:-1,requestingCode:-2,requestSuccessCode:100,requestFailMsg:{def:"请求失败！请重试！",0:"无法连接到服务器！",500:"服务器出错!",timeout:"请求超时！请检查网络连接！",parsererror:"服务器出错或数据解析出错！"}});var k={},l={},m=function(d,g,h,i){var m={type:"post",dataType:"json",timeout:1e4};e(d)?(m=c.extend(m,d),i=h,h=g):(g=g||{},e(g)||(g=c.unparam(g)),m.url=d,m.data=g),d=m.url.trim(),g=m.data,"boolean"==typeof h&&(i=h,h=0),h=h||f("requestSuccessCode");var n=k[d];return!i&&n&&"pending"===n.state()&&b(g,l[d])?(n.notify(f("requestingCode")),n.promise()):(n=k[d]=a.Deferred(),l[d]=g,g.jtoken=j(),m.url=c.addQueryParam(d,"_",String(Math.random()).replace(/\D/g,"")),a.ajax(m).done(function(a){var b,d;a&&(b=a.code,d=a.result),b===h?(d&&(a=d,a.result=c.extend(Array.isArray(a)?[]:{},a)),n.resolve(a)):n.reject(b,a)}).fail(function(a,b){var c=f("requestFailMsg");n.reject(f("requestFailCode"),{code:f("requestFailCode"),url:d,msg:c[a.status]||c[b]||c.def})}),n.promise())};return c.Request=c.request=m,m}),define("msg",["widget","position","base/2.0/css/msg.css"],function(a,b){var c=tbtx,d=a.extend({attrs:{visible:!1,msg:"",duration:4e3,direction:"center"},events:{click:"clear"},_onRenderVisible:function(a){this.element[a?"fadeIn":"fadeOut"]()},clear:function(){var a=this;a.set("msg","")},_onRenderMsg:function(a){var b=this,d=this.get("duration");return b.timer&&b.timer.cancel(),a?(b.element.html(a),b.set("visible",!0),b.pin(),void(d>0&&(b.timer=c.later(b.clear,d,!1,b)))):void b.set("visible",!1)},pin:function(){var a=this,c=a.element,d=a.get("direction");"center"===d?b.center(c):b.pin({element:c,x:"50%",y:"top"===d?-60:"100%+60"},{element:b.VIEWPORT,x:"50%",y:"top"===d?0:"100%"})}}),e=c.singleton(function(){return new d({className:"tbtx-broadcast"}).render()}),f=function(a,b,d){var f=e();return d&&f.set("duration",d),f.set("msg",a),f.set("direction",b||"center"),c};return c.broadcast=f,f}),function(a){var b,c=a.global,d=a.define,e=a.require;d.amd.jQuery=!0,c.JSON&&d("json",c.JSON),b=c.jQuery||c.Zepto,b&&(d("jquery",function(){return b}),d("$",function(){return b})),e("events",function(b){a.Events=b,b.mixTo(a)});var f={broadcast:{module:"msg"},pin:{module:"position"},center:{module:"position"}};a.each(f,function(b,c){var d=b.module||c;a[c]=function(){var b=arguments;e(d,function(d){var e=d[c]||d;e.apply(a,b)})}})}(tbtx);