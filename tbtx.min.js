!function(a,b){function c(a,c){c||(c=a,a=b);for(var d in c)a[d]=c[d];return a}var d=a.console&&console.log,e=function(){};b=a[b]=a[b]||{},c(b,{log:d?function(a,b,c){return c&&(a=c+": "+a),console[b&&console[b]?b:"log"](a),this}:e,global:a,noop:e,mix:c})}(this,"tbtx"),function(a,b){var c=a.global,d=Array.prototype,e=Object.prototype,f=String.prototype,g=Function.prototype,h=e.toString,i=d.slice,j=e.hasOwnProperty,k=function(a,b){return j.call(a,b)};if(!Object.keys){var l=!{toString:1}.propertyIsEnumerable("toString"),m=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toString","toLocaleString","valueOf"];Object.keys=function(a){var b,c,d=[];for(b in a)k(a,b)&&d.push(b);if(l)for(c=m.length-1;c>=0;c--)b=m[c],k(a,b)&&d.push(b);return d}}if(a.keys=Object.keys,g.bind||(g.bind=function(a){var b=i.call(arguments,1),d=this,e=function(){},f=function(){return d.apply(this instanceof e&&a?this:a||c,b.concat(i.call(arguments)))};return e.prototype=this.prototype,f.prototype=new e,f}),a.bind=function(a,b){return a.bind(b)},Date.now||(Date.now=function(){return+new Date}),a.Now=Date.now,!f.trim){var n=/^\s+|\s+$/g;f.trim=function(){return this.replace(n,"")}}a.trim=function(a){return a.trim()},d.forEach||(d.forEach=function(a,b){for(var c=0,d=this.length;d>c;c++)a.call(b,this[c],c,this)}),d.map||(d.map=function(a,b){for(var c=[],d=0,e=this.length;e>d;d++)c.push(a.call(b,this[d],d,this));return c}),d.filter||(d.filter=function(a,b){for(var c,d=[],e=0,f=this.length;f>e;e++)c=this[e],a.call(b,c,e,this)&&d.push(c);return d}),d.some||(d.some=function(a,b){for(var c=0,d=this.length;d>c;c++)if(a.call(b,this[c],c,this))return!0;return!1}),d.every||(d.every=function(a,b){for(var c=0,d=this.length;d>c;c++)if(!a.call(b,this[c],c,this))return!1;return!0}),d.indexOf||(d.indexOf=function(a,b){var c,d=-1,e=this.length;for(c=1*b||0,c=c>=0?c:Math.max(0,e+c);e>c;c++)if(this[c]===a)return c;return d}),d.lastIndexOf||(d.lastIndexOf=function(a,b){var c=-1,d=this.length,e=d-1;for(b=1*b||d-1,e=Math.min(e,b);e>-1;e--)if(this[e]===a)return e;return c}),d.reduce||(d.reduce=function(a,c){var d=c,e=0,f=this.length;for(c===b&&(d=this[0],e=1);f>e;e++)d=a(d,this[e],e,this);return d}),d.reduceRight||(d.reduceRight=function(a,c){var d=this.length,e=d-1,f=c;for(c===b&&(f=this[d-1],e--);e>-1;e--)f=a(f,this[e],e,this);return f}),"forEach map filter every some".split(" ").forEach(function(b){a[b]=function(a,c,e){if(null==a)return a;if(a.length===+a.length&&(a=z(a)),a[b]===d[b])return a[b](c,e);var f,g=Object.keys(a),h=g.map(function(b){return a[b]}),i=h[b](function(d,h){var i=g[h],j=c.call(e,d,i,a);return"filter"===b&&j&&(f=f||{},f[i]=d),"map"===b&&(f=f||{},f[i]=j),j});return f||i}}),"reduce reduceRight".split(" ").forEach(function(c){a[c]=function(a,d,e){return a.length===+a.length&&(a=z(a)),e===b?a[c](d):a[c](d,e)}}),"indexOf lastIndexOf".split(" ").forEach(function(b){a[b]=function(a,c,d){return a.length!==+a.length||s(a)||(a=z(a)),a[b](c,d)}});var o={};"Boolean Number String Function Array Date RegExp Object".split(" ").forEach(function(b,c){o["[object "+b+"]"]=c=b.toLowerCase(),a["is"+b]=function(a){return w(a)===c}});var p=Array.isArray=a.isArray=Array.isArray||a.isArray,q=a.isFunction,r=a.isObject,s=a.isString,t=a.each=function(a,b,c){if(null==a)return a;var d,e,f=0,g=a.length;if(c=c||null,g===+g)for(;g>f&&b.call(c,a[f],f,a)!==!1;f++);else for(e=Object.keys(a),g=e.length;g>f&&(d=e[f],b.call(c,a[d],d,a)!==!1);f++);},u="",v=function(a,b){var c;return function(){return c||(c=a.apply(b,arguments))}},w=function(a){return null==a?String(a):o[h.call(a)]||"object"},x=function(a){return null!=a&&a===a.window},y=function(a){if(!a||!r(a)||a.nodeType||x(a))return!1;var c,d;try{if((d=a.constructor)&&!k(a,"constructor")&&!k(d.prototype,"isPrototypeOf"))return!1}catch(e){return!1}for(c in a);return c===b||k(a,c)},z=function(a){if(null==a)return[];if(p(a))return a;var b=[],c=0,d=a.length,e=typeof d,f=typeof a;if("number"!==e||"string"==typeof a.nodeName||x(a)||"string"===f||"function"===f&&!("item"in a&&"number"===e))return[a];for(;d>c;c++)b[c]=a[c];return b},A=function(){var a,c,d,e,f,g,h=arguments[0]||{},i=1,j=arguments.length,k=!1;for("boolean"==typeof h&&(k=h,h=arguments[i]||{},i++),"object"==typeof h||q(h)||(h={}),i===j&&(h=this,i--);j>i;i++)if(null!=(f=arguments[i]))for(e in f)a=h[e],d=f[e],h!==d&&(k&&d&&(y(d)||(c=p(d)))?(c?(c=!1,g=a&&p(a)?a:[]):g=a&&y(a)?a:{},h[e]=A(k,g,d)):d!==b&&(h[e]=d));return h},B={"&amp;":"&","&gt;":">","&lt;":"<","&#x60;":"`","&#x2F;":"/","&quot;":'"',"&#x27;":"'"},C={},D=v(function(){var a=u;return t(B,function(b){a+=b+"|"}),a=a.slice(0,-1),new RegExp(a,"g")}),E=v(function(){var a=u;return t(C,function(b){a+=b+"|"}),a+="&#(\\d{1,5});",new RegExp(a,"g")}),F=function(a){return String(a).replace(D(),function(a){return C[a]})},G=function(a){return String(a).replace(E(),function(a){return B[a]})};t(B,function(a,b){C[a]=b}),a.mix({isNotEmptyString:function(a){return s(a)&&a!==u},isEmptyObject:function(a){for(var c in a)if(c!==b)return!1;return!0},isWindow:x,isPlainObject:y,pluck:function(b,c){return c=(c+u).split("."),a.map(b,function(a){for(var b=0,d=a,e=c.length;e>b;b++)d=d[c[b]];return d})},result:function(a){return q(a)?a.call(this,i.call(arguments,1)):a},extend:A,inArray:function(a,b){return a.indexOf(b)>-1},type:w,makeArray:z,deepCopy:function(a){return A(!0,{},a)},singleton:v,unique:function(a){var b={};return a.filter(function(a){var c=typeof a+a;return 1!==b[c]?(b[c]=1,!0):!1})},namespace:function(){var a,b,d,e=z(arguments),f=this,g=e.length;for(a=0;g>a;a++)for(d=(u+e[a]).split("."),b=c[d[0]]===f?1:0;b<d.length;++b)f=f[d[b]]=f[d[b]]||{};return f},ucfirst:function(a){return a.charAt(0).toUpperCase()+a.substring(1)},startsWith:function(a,b){return 0===a.lastIndexOf(b,0)},endsWith:function(a,b){var c=a.length-b.length;return c>=0&&a.indexOf(b,c)===c},later:function(b,c,d,e,f){c=c||0;var g,h,i=b,j=z(f);return"string"==typeof b&&(i=e[b]),i||a.log("method undefined","error","later"),g=function(){i.apply(e,j)},h=d?setInterval(g,c):setTimeout(g,c),{id:h,interval:d,cancel:function(){this.interval?clearInterval(h):clearTimeout(h)}}},throttle:function(a,b,c){if(c=c||this,b=b||150,-1===b)return function(){a.apply(c,arguments)};var d=Date.now();return function(){var e=Date.now();e-d>b&&(d=e,a.apply(c,arguments))}},debounce:function(b,c,d){if(d=d||this,c=c||150,-1===c)return function(){b.apply(d,arguments)};var e=null,f=function(){f.stop(),e=a.later(b,c,0,d,arguments)};return f.stop=function(){e&&(e.cancel(),e=0)},f},substitute:function(c,d,e){return a.isNotEmptyString(c)?y(d)||p(d)?c.replace(e||/\\?\{\{\s*([^{}\s]+)\s*\}\}/g,function(a,c){return"\\"===a.charAt(0)?a.slice(1):d[c]===b?u:d[c]}):c:c},escapeHtml:F,unEscapeHtml:G})}(tbtx),function(a,b){function c(a){var b=typeof a;return null===a||"object"!==b&&"function"!==b}var d=a.each,e=a.endsWith,f=a.isArray,g="",h=function(a){return encodeURIComponent(String(a))},i=function(a){return decodeURIComponent(a.replace(/\+/g," "))},j=function(a,d,e,i){d=d||"&",e=e||"=",i===b&&(i=!0);var j,k,l,m,n,o=[];for(j in a)if(n=a[j],j=h(j),c(n))o.push(j),n!==b&&o.push(e,h(n+g)),o.push(d);else if(f(n)&&n.length)for(k=0,m=n.length;m>k;++k)l=n[k],c(l)&&(o.push(j,i?h("[]"):g),l!==b&&o.push(e,h(l+g)),o.push(d));return o.pop(),o.join(g)},k=function(c,d,g){if("string"!=typeof c||!(c=c.trim()))return{};d=d||"&",g=g||"=";for(var h,j,k,l={},m=c.split(d),n=0,o=m.length;o>n;++n){if(h=m[n].indexOf(g),-1==h)j=i(m[n]),k=b;else{j=i(m[n].substring(0,h)),k=m[n].substring(h+1);try{k=i(k)}catch(p){a.log(p+"decodeURIComponent error : "+k,"error","unparam")}e(j,"[]")&&(j=j.substring(0,j.length-2))}j in l?f(l[j])?l[j].push(k):l[j]=[l[j],k]:l[j]=k}return l},l=a.Query=function(a){this._query=a||g,this._queryMap=k(this._query)};l.prototype={get:function(a){var b=this._queryMap;return a?b[a]:b},set:function(a,b){var c=this,e=c._queryMap;return"string"==typeof a?c._queryMap[a]=b:(a instanceof l&&(a=a.get()),d(a,function(a,b){e[b]=a})),c},remove:function(a){var b=this;return a?delete b._queryMap[a]:b._queryMap={},b},add:function(a,c){var d,e=this,f=e._queryMap;if("string"==typeof a)d=f[a],d=d===b?c:[].concat(d).concat(c),f[a]=d;else{a instanceof l&&(a=a.get());for(var g in a)e.add(g,a[g])}return e},toString:function(a){return j(this._queryMap,b,b,a)}};var m=new RegExp("^(?:([^:/?#]+):)?(?://(?:([^/?#]*)@)?([^/?#:@]*)(?::([0-9]+))?)?([^?#]+)?(?:\\?([^#]*))?(?:#(.*))?$"),n={scheme:1,credentials:2,domain:3,port:4,path:5,query:6,fragment:7},o=location.href,p=a.Uri=function(b){var c,e=this;return b=b||o,a.keys(n).forEach(function(a){e[a]=g}),c=p.getComponents(b),d(c,function(b,c){if("query"===c)e.query=new l(b);else{try{b=i(b)}catch(d){a.log(d+"urlDecode error : "+b,"error","Uri")}e[c]=b}}),e};p.prototype={getFragment:function(){return this.fragment},toString:function(a){var b=[],c=this,d=c.scheme,e=c.domain,f=c.path,i=c.port,j=c.fragment,k=c.query.toString(a),l=c.credentials;return d&&(b.push(d),b.push(":")),e&&(b.push("//"),l&&(b.push(l),b.push("@")),b.push(h(e)),i&&(b.push(":"),b.push(i))),f&&b.push(f),k&&(b.push("?"),b.push(k)),j&&(b.push("#"),b.push(j)),b.join(g)}},p.getComponents=function(a){a=a||"";var b=a.match(m)||[],c={};return d(n,function(a,d){c[d]=b[a]||g}),c},a.mix({urlEncode:h,urlDecode:i,param:j,unparam:k,isUri:function(b){if(a.isNotEmptyString(b)){var c=m.exec(b);return c&&c[1]}return!1},parseUri:function(a){return p.getComponents(a||o)},getFragment:function(a){return new p(a).getFragment()},getQueryParam:function(b,c){return a.isUri(b)&&(b=[c,c=b][0]),c=new p(c),c.query.get(b)||g},addQueryParam:function(b,c,d){var e={};return a.isPlainObject(b)?(e=b,d=c):e[b]=c,d=new p(d),d.query.add(e),d.toString()},removeQueryParam:function(b,c){return b=a.makeArray(b),c=new p(c),b.forEach(function(a){c.query.remove(a)}),c.toString()}}),a.parseUrl=a.parseUri}(tbtx),function(a,b){function c(){return A++}function d(a){return a.match(B)[0]}function e(a){for(a=a.replace(C,"/");a.match(D);)a=a.replace(D,"/");return a=a.replace(E,"$1/")}function f(a){var b=a.length-1,c=a.charAt(b);return"#"===c?a.substring(0,b):".js"===a.substring(b-2)||a.indexOf("?")>0||".css"===a.substring(b-3)||"/"===c?a:a+".js"}function g(a){var b=z.alias;return b&&t(b[a])?b[a]:a}function h(a){var b,c=z.paths;return c&&(b=a.match(F))&&t(c[b[1]])&&(a=c[b[1]]+b[2]),a}function i(a){var b=z.vars;return b&&a.indexOf("{")>-1&&(a=a.replace(G,function(a,c){return t(b[c])?b[c]:a})),a}function j(a){var b=z.map,c=a;if(b)for(var d=0,e=b.length;e>d;d++){var f=b[d];if(c=v(f)?f(a)||a:a.replace(f[0],f[1]),c!==a)break}return c}function k(a,b){var c,f=a.charAt(0);if(H.test(a))c=a;else if("."===f)c=e((b?d(b):z.cwd)+a);else if("/"===f){var g=z.cwd.match(I);c=g?g[0]+a.substring(1):a}else c=z.base+a;return 0===c.indexOf("//")&&(c=location.protocol+c),c}function l(a,b){if(!a)return"";a=g(a),a=h(a),a=i(a),a=f(a);var c=k(a,b);return c=j(c)}function m(a){return a.hasAttribute?a.src:a.getAttribute("src",4)}function n(a,b,c){b=b||x;var d=T.test(a),e=J.createElement(d?"link":"script");if(c){var f=v(c)?c(a):c;f&&(e.charset=f)}o(e,b,d),d?(e.rel="stylesheet",e.href=a):(e.async=!0,e.src=a),O=e,S?R.insertBefore(e,S):R.appendChild(e),O=null}function o(b,c,d){var e="onload"in b;if(d&&(U||!e))return setTimeout(function(){p(b,c)},1),void 0;var f=function(){b.onload=b.onerror=b.onreadystatechange=null,d||R.removeChild(b),b=null,c()};e?(b.onload=f,b.onerror=function(b){a.log(b,"error","css"),f()}):b.onreadystatechange=function(){/loaded|complete/.test(b.readyState)&&f()}}function p(a,b){var c,d=a.sheet;if(U)d&&(c=!0);else if(d)try{d.cssRules&&(c=!0)}catch(e){"NS_ERROR_DOM_SECURITY_ERR"===e.name&&(c=!0)}setTimeout(function(){c?b():p(a,b)},20)}function q(){if(J.currentScript)return J.currentScript;if(O)return O;if(P&&"interactive"===P.readyState)return P;for(var a=R.getElementsByTagName("script"),b=a.length-1;b>=0;b--){var c=a[b];if("interactive"===c.readyState)return P=c}}function r(a,b){this.uri=a,this.dependencies=b||[],this.exports=null,this.status=0,this._waitings={},this._remain=0}var s=a.isObject,t=a.isString,u=a.isArray,v=a.isFunction,w=a.global,x=a.noop,y=a.Loader={},z=y.data={},A=0,B=/[^?#]*\//,C=/\/\.\//g,D=/\/[^/]+\/\.\.\//,E=/([^:/])\/\//g,F=/^([^/:]+)(\/.+)$/,G=/{([^{]+)}/g,H=/^\/\/.|:\//,I=/^.*?\/\/.*?\//,J=document,K=d(location.href),L=J.scripts,M=L[L.length-1],N=d(m(M)||K);y.resolve=l;var O,P,Q,R=J.head||J.getElementsByTagName("head")[0]||J.documentElement,S=R.getElementsByTagName("base")[0],T=/\.css(?:\?|$)/i,U=+navigator.userAgent.replace(/.*(?:AppleWebKit|AndroidWebKit)\/(\d+).*/,"$1")<536,V=y.cache={},W={},X={},Y={},Z=r.STATUS={FETCHING:1,SAVED:2,LOADING:3,LOADED:4,EXECUTING:5,EXECUTED:6};r.prototype={resolve:function(){for(var a=this,b=a.dependencies,c=[],d=0,e=b.length;e>d;d++)c[d]=r.resolve(b[d],a.uri);return c},load:function(){var a=this;if(!(a.status>=Z.LOADING)){a.status=Z.LOADING;for(var b,c=a.resolve(),d=a._remain=c.length,e=0;d>e;e++)b=r.get(c[e]),b.status<Z.EXECUTED?b._waitings[a.uri]=(b._waitings[a.uri]||0)+1:a._remain--;if(0===a._remain)return a.onload(),void 0;for(e=0;d>e;e++)b=V[c[e]],b.status<Z.FETCHING?b.fetch():b.status===Z.SAVED&&b.load()}},onload:function(){var a=this;a.status=Z.LOADED,a.callback&&a.callback(),a.exec();var b,c,d=a._waitings;for(b in d)d.hasOwnProperty(b)&&(c=V[b],c._remain-=d[b],0===c._remain&&c.onload());delete a._waitings,delete a._remain},exec:function(){var a=this;if(a.status>=Z.EXECUTING)return a.exports;a.status=Z.EXECUTING,a.uri;for(var c=a.resolve(),d=[],e=0,f=c.length;f>e;e++)d[e]=r.get(c[e]).exports;var g=a.factory,h=v(g)?g.apply(null,d):g;return h===b&&(h=a.exports),delete a.factory,a.exports=h,a.status=Z.EXECUTED,h},fetch:function(){function a(){n(d,b,z.charset)}function b(){delete W[d],X[d]=!0,Q&&(r.save(d,Q),Q=null);var a,b=Y[d];for(delete Y[d];a=b.shift();)a.load()}var c=this,d=c.uri;return c.status=Z.FETCHING,!d||X[d]?(c.load(),void 0):W[d]?(Y[d].push(c),void 0):(W[d]=!0,Y[d]=[c],a(),void 0)}},r.save=function(a,b){var c=r.get(a);c.status<Z.SAVED&&(c.id=b.id||a,c.dependencies=b.deps||[],c.factory=b.factory,c.status=Z.SAVED)},r.get=function(a,b){return V[a]||(V[a]=new r(a,b))},r.require=function(a,b,c){var d=r.get(c,u(a)?a:[a]);d.callback=function(){for(var a=[],c=d.resolve(),e=0,f=c.length;f>e;e++)a[e]=V[c[e]].exports;b&&b.apply(w,a),delete d.callback},d.load()},r.resolve=function(a,b){return l(a,b)},r.register=function(a,b){var c=r.resolve(a),d=r.get(c);d.id=a||c,b&&(d.exports=b),d.status=Z.EXECUTED},r.define=function(a,c,d){var e=arguments.length;1===e?(d=a,a=b):2===e&&(d=c,u(a)?(c=a,a=b):c=b),u(c)||(c=[]);var f={id:a,uri:r.resolve(a),deps:c,factory:d};if(!f.uri){var g=q();g&&(f.uri=g.src)}f.uri?r.save(f.uri,f):Q=f},r.define.amd={},z.base=N,z.dir=N,z.cwd=K,z.charset="utf-8",y.config=function(a){for(var b in a){var c=a[b],d=z[b];if(d&&s(d))for(var e in c)d[e]=c[e];else u(d)?c=d.concat(c):"base"===b&&("/"!==c.slice(-1)&&(c+="/"),c=k(c)),z[b]=c}},w.define=a.define=r.define,a.require=function(b,d){return r.require(b,d,z.cwd+"_require_"+c()),a},a.mix({register:r.register,realpath:e,request:n})}(tbtx),function(a){var b=a.realpath,c=a.register,d=a.global,e=a.Loader,f=e.data,g=f.dir,h=a.staticUrl=b(g+"../../../"),i={};["dist","plugin","gallery","component"].forEach(function(a){i[a]=g+a}),i.arale=g+"dist/arale",e.config({base:h,alias:{events:"arale/events/1.1.0/events","class":"arale/class/1.1.0/class",base:"arale/base/1.1.1/base",widget:"arale/widget/1.1.1/widget",position:"arale/position/1.0.1/position",detector:"arale/detector/1.3.0/detector",router:"dist/router",overlay:"component/overlay/1.1.4/overlay",popup:"component/popup/1.0.0/popup",switchable:"component/switchable/1.0.3/switchable",validator:"component/validator/0.9.7/validator",jquery:"gallery/jquery/1.8.3/jquery.min",zepto:"gallery/zepto/1.1.2/zepto.min",handlebars:"gallery/handlebars/1.3.0/handlebars",json:"gallery/json2/json2",easing:"plugin/jquery.easing.1.3",kissy:"http://g.tbcdn.cn/kissy/k/1.4.0/seed-min.js"},paths:i}),a.define.amd.jQuery=!0,d.JSON&&c("json"),d.jQuery&&(c("jquery",jQuery),c("$",jQuery)),d.KISSY&&c("kissy"),d.Zepto&&(c("zepto",Zepto),c("$",Zepto))}(tbtx),function(a){var b=a.isNotEmptyString,c=document,d=864e5,e=encodeURIComponent,f=decodeURIComponent,g={get:function(a){var d,e;return b(a)&&(e=String(c.cookie).match(new RegExp("(?:^| )"+a+"(?:(?:=([^;]*))|;|$)")))&&(d=e[1]?f(e[1]):""),d},set:function(a,f,g,h,i,j){var k=String(e(f)),l=h;return"number"==typeof l&&(l=new Date,l.setTime(l.getTime()+h*d)),l instanceof Date&&(k+="; expires="+l.toUTCString()),b(g)&&(k+="; domain="+g),b(i)&&(k+="; path="+i),j&&(k+="; secure"),c.cookie=a+"="+k,this},remove:function(a,b,c,d){return this.set(a,"",b,-1,c,d),this}};a.cookie=g}(tbtx),function(a){function b(a,b){a=a||"Y-m-d h:i:s";var d=a;return h(c(b),function(a,b){d=d.replace(b,a)}),d}function c(a){a=e(a);var b,c,d={Y:a.getFullYear(),M:a.getMonth()+1,D:a.getDate(),H:a.getHours(),I:a.getMinutes(),S:a.getSeconds()},g={};for(c in d)d[c]=String(d[c]),g[c]=d[c],b=c.toLowerCase(),g[b]="y"==b?d[c].substring(2,4):f(d[c]);return g}function d(a,b){a=e(a),b=e(b);var c,d,f,g,h=60,i=60*h,j=24*i,k=Math.abs(a.getTime()-b.getTime())/1e3,l=k;return c=Math.floor(l/j),l-=c*j,d=Math.floor(l/i),l-=d*i,f=Math.floor(l/h),l-=f*h,g=Math.floor(l),{day:c,hour:d,minute:f,second:g}}function e(a){if(g(a))return a;var b=typeof a;return"number"==b||"string"==b?new Date(a):new Date}function f(a){return a=String(a),1===a.length?"0"+a:a}var g=a.isDate,h=a.each;a.mix({normalizeDate:c,diffDate:d,toDate:e,formatDate:b})}(tbtx),define("request",["jquery"],function(a){var b=tbtx,c=b.cookie,d=b.isPlainObject,e=function(){var a=Math.random().toString().substr(2)+(new Date).getTime().toString().substr(1)+Math.random().toString().substr(2);return c.set(b.tokenName,a,"","","/"),a};b.tokenName="MIIEE_JTOKEN";var f=-1,g={code:f,msg:"请求失败！请检查网络连接！"},h=-2,i={},j=function(b,c,j){var k;d(b)?(k=b,j=c):(c=c||{},d(c)&&!c.jtoken&&(c.jtoken=e()),k={url:b,data:c,type:"post",dataType:"json",timeout:1e4}),j=j||100;var l=i[b];return l&&"pending"===l.state()?(l.notify(h),l.promise()):(l=i[b]=a.Deferred(),a.ajax(k).done(function(a){var b=a&&a.code;b===j?l.resolve(a):l.reject(b,a)}).fail(function(){l.reject(f,g)}),l.promise())};return b.Request=j,j}),define("msg",["widget","position","base/2.0/css/msg.css"],function(a,b){var c=tbtx,d=a.extend({attrs:{visible:!1,msg:"",duration:4e3,direction:"center"},_onRenderVisible:function(a){this.element[a?"fadeIn":"fadeOut"]()},_onRenderMsg:function(a){var b=this,d=this.get("duration");return b.timer&&b.timer.cancel(),a?(b.element.html(a),b.set("visible",!0),d>0&&(b.timer=c.later(function(){b.set("visible",!1)},d,!1)),void 0):(b.set("visible",!1),void 0)},_onRenderDirection:function(a){var c=this.element;"center"===a?b.center(c):b.pin({element:c,x:"50%",y:"top"===a?-60:"100%+60"},{element:b.VIEWPORT,x:"50%",y:"top"===a?0:"100%"})}}),e=c.singleton(function(){return new d({className:"tbtx-broadcast"}).render()});c.broadcast=function(a,b,d){var f=e();return d&&f.set("duration",d),f.set("direction",b||"center"),f.set("msg",a),c}});